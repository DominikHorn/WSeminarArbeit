<!DOCTYPE html>
<!-- saved from url=(0116)http://gamedevelopment.tutsplus.com/tutorials/how-to-create-a-custom-2d-physics-engine-the-core-engine--gamedev-7493 -->
<html data-ad-targeting="{&quot;gamedevelo&quot;:[&quot;platform-agnostic&quot;,&quot;cpp&quot;,&quot;implementation&quot;]}" data-ads="[{&quot;doubleclick_id&quot;:&quot;11757429&quot;,&quot;unit_name&quot;:&quot;hub_gamedev&quot;,&quot;location&quot;:&quot;inarticle&quot;,&quot;width&quot;:300,&quot;height&quot;:250,&quot;slot_id&quot;:&quot;1392179545408-0&quot;,&quot;mappings&quot;:[]},{&quot;doubleclick_id&quot;:&quot;11757429&quot;,&quot;unit_name&quot;:&quot;hub_gamedev&quot;,&quot;location&quot;:&quot;post_top&quot;,&quot;width&quot;:300,&quot;height&quot;:250,&quot;slot_id&quot;:&quot;1385453370267-0&quot;,&quot;mappings&quot;:[{&quot;viewport&quot;:{&quot;width&quot;:1024,&quot;height&quot;:768},&quot;units&quot;:[{&quot;width&quot;:300,&quot;height&quot;:250}]},{&quot;viewport&quot;:{&quot;width&quot;:980,&quot;height&quot;:768},&quot;units&quot;:[{&quot;width&quot;:300,&quot;height&quot;:250}]},{&quot;viewport&quot;:{&quot;width&quot;:768,&quot;height&quot;:980},&quot;units&quot;:[{&quot;width&quot;:300,&quot;height&quot;:250}]},{&quot;viewport&quot;:{&quot;width&quot;:640,&quot;height&quot;:480},&quot;units&quot;:[{&quot;width&quot;:300,&quot;height&quot;:250}]},{&quot;viewport&quot;:{&quot;width&quot;:480,&quot;height&quot;:640},&quot;units&quot;:[{&quot;width&quot;:300,&quot;height&quot;:250}]}]},{&quot;doubleclick_id&quot;:&quot;11757429&quot;,&quot;unit_name&quot;:&quot;hub_gamedev&quot;,&quot;location&quot;:&quot;post_mid&quot;,&quot;width&quot;:300,&quot;height&quot;:250,&quot;slot_id&quot;:&quot;1385453414394-0&quot;,&quot;mappings&quot;:[{&quot;viewport&quot;:{&quot;width&quot;:1024,&quot;height&quot;:768},&quot;units&quot;:[{&quot;width&quot;:300,&quot;height&quot;:250}]},{&quot;viewport&quot;:{&quot;width&quot;:980,&quot;height&quot;:768},&quot;units&quot;:[{&quot;width&quot;:300,&quot;height&quot;:250}]},{&quot;viewport&quot;:{&quot;width&quot;:768,&quot;height&quot;:980},&quot;units&quot;:[{&quot;width&quot;:300,&quot;height&quot;:250}]},{&quot;viewport&quot;:{&quot;width&quot;:640,&quot;height&quot;:480},&quot;units&quot;:[{&quot;width&quot;:300,&quot;height&quot;:250}]},{&quot;viewport&quot;:{&quot;width&quot;:480,&quot;height&quot;:640},&quot;units&quot;:[{&quot;width&quot;:300,&quot;height&quot;:250}]}]},{&quot;doubleclick_id&quot;:&quot;11757429&quot;,&quot;unit_name&quot;:&quot;hub_gamedev&quot;,&quot;location&quot;:&quot;post_comments&quot;,&quot;width&quot;:300,&quot;height&quot;:250,&quot;slot_id&quot;:&quot;1385453399887-0&quot;,&quot;mappings&quot;:[{&quot;viewport&quot;:{&quot;width&quot;:1024,&quot;height&quot;:768},&quot;units&quot;:[{&quot;width&quot;:300,&quot;height&quot;:250}]},{&quot;viewport&quot;:{&quot;width&quot;:980,&quot;height&quot;:768},&quot;units&quot;:[{&quot;width&quot;:300,&quot;height&quot;:250}]},{&quot;viewport&quot;:{&quot;width&quot;:768,&quot;height&quot;:980},&quot;units&quot;:[{&quot;width&quot;:300,&quot;height&quot;:250}]},{&quot;viewport&quot;:{&quot;width&quot;:640,&quot;height&quot;:480},&quot;units&quot;:[{&quot;width&quot;:300,&quot;height&quot;:250}]},{&quot;viewport&quot;:{&quot;width&quot;:480,&quot;height&quot;:640},&quot;units&quot;:[{&quot;width&quot;:300,&quot;height&quot;:250}]}]},{&quot;location&quot;:&quot;leader&quot;,&quot;unit_name&quot;:&quot;hub_gamedev&quot;,&quot;slot_id&quot;:&quot;1391730999055-0&quot;,&quot;width&quot;:728,&quot;height&quot;:90,&quot;mappings&quot;:[{&quot;viewport&quot;:{&quot;width&quot;:1024,&quot;height&quot;:768},&quot;units&quot;:[{&quot;width&quot;:728,&quot;height&quot;:90}]},{&quot;viewport&quot;:{&quot;width&quot;:980,&quot;height&quot;:768},&quot;units&quot;:[{&quot;width&quot;:728,&quot;height&quot;:90}]},{&quot;viewport&quot;:{&quot;width&quot;:768,&quot;height&quot;:980},&quot;units&quot;:[{&quot;width&quot;:728,&quot;height&quot;:90}]}],&quot;doubleclick_id&quot;:&quot;11757429&quot;}]" data-app-version="440e8826d439c17c7c29cdecd087da086a0cb92b-production" class=" js no-touch history"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8">
<script type="text/javascript" async="" src="./Seite2_files/linkid.js"></script><script type="text/javascript" async="" src="./Seite2_files/ec.js"></script><script async="" src="./Seite2_files/analytics.js"></script><script async="" type="text/javascript" src="./Seite2_files/gpt.js"></script><script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","errorBeacon":"bam.nr-data.net","licenseKey":"27851e2035","applicationID":"3094824","transactionName":"JQpZTURXXlRcRBYWRBIKRVBXVEEXSl5WFQ==","queueTime":0,"applicationTime":62,"agent":"js-agent.newrelic.com/nr-768.min.js"}</script>
<script type="text/javascript">(window.NREUM||(NREUM={})).loader_config={xpid:"VgUFWFRbGwAAXVVaBQU="};window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var o=e[n]={exports:{}};t[n][0].call(o.exports,function(e){var o=t[n][1][e];return r(o||e)},o,o.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({QJf3ax:[function(t,e){function n(t){function e(e,n,a){t&&t(e,n,a),a||(a={});for(var c=s(e),f=c.length,u=i(a,o,r),d=0;f>d;d++)c[d].apply(u,n);return u}function a(t,e){f[t]=s(t).concat(e)}function s(t){return f[t]||[]}function c(){return n(e)}var f={};return{on:a,emit:e,create:c,listeners:s,_events:f}}function r(){return{}}var o="nr@context",i=t("gos");e.exports=n()},{gos:"7eSDFh"}],ee:[function(t,e){e.exports=t("QJf3ax")},{}],3:[function(t){function e(t){try{i.console&&console.log(t)}catch(e){}}var n,r=t("ee"),o=t(1),i={};try{n=localStorage.getItem("__nr_flags").split(","),console&&"function"==typeof console.log&&(i.console=!0,-1!==n.indexOf("dev")&&(i.dev=!0),-1!==n.indexOf("nr_dev")&&(i.nrDev=!0))}catch(a){}i.nrDev&&r.on("internal-error",function(t){e(t.stack)}),i.dev&&r.on("fn-err",function(t,n,r){e(r.stack)}),i.dev&&(e("NR AGENT IN DEVELOPMENT MODE"),e("flags: "+o(i,function(t){return t}).join(", ")))},{1:20,ee:"QJf3ax"}],4:[function(t){function e(t,e,n,i,s){try{c?c-=1:r("err",[s||new UncaughtException(t,e,n)])}catch(f){try{r("ierr",[f,(new Date).getTime(),!0])}catch(u){}}return"function"==typeof a?a.apply(this,o(arguments)):!1}function UncaughtException(t,e,n){this.message=t||"Uncaught error with no additional information",this.sourceURL=e,this.line=n}function n(t){r("err",[t,(new Date).getTime()])}var r=t("handle"),o=t(6),i=t("ee"),a=window.onerror,s=!1,c=0;t("loader").features.err=!0,t(3),window.onerror=e;try{throw new Error}catch(f){"stack"in f&&(t(4),t(5),"addEventListener"in window&&t(1),window.XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.addEventListener&&window.XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.addEventListener&&!/CriOS/.test(navigator.userAgent)&&t(2),s=!0)}i.on("fn-start",function(){s&&(c+=1)}),i.on("fn-err",function(t,e,r){s&&(this.thrown=!0,n(r))}),i.on("fn-end",function(){s&&!this.thrown&&c>0&&(c-=1)}),i.on("internal-error",function(t){r("ierr",[t,(new Date).getTime(),!0])})},{1:5,2:8,3:3,4:7,5:6,6:21,ee:"QJf3ax",handle:"D5DuLP",loader:"G9z0Bl"}],5:[function(t,e){function n(t){i.inPlace(t,["addEventListener","removeEventListener"],"-",r)}function r(t){return t[1]}var o=t("ee").create(),i=t(1)(o),a=t("gos");if(e.exports=o,n(window),"getPrototypeOf"in Object){for(var s=document;s&&!s.hasOwnProperty("addEventListener");)s=Object.getPrototypeOf(s);s&&n(s);for(var c=XMLHttpRequest.prototype;c&&!c.hasOwnProperty("addEventListener");)c=Object.getPrototypeOf(c);c&&n(c)}else XMLHttpRequest.prototype.hasOwnProperty("addEventListener")&&n(XMLHttpRequest.prototype);o.on("addEventListener-start",function(t,e){function n(){return s}if(t[1]){var r=t[1];if("function"==typeof r){var s=a(r,"nr@wrapped",function(){return i(r,"fn-",n,r.name||"anonymous")});this.wrapped=t[1]=s,o.emit("initEventContext",[t,e],this.wrapped)}else"function"==typeof r.handleEvent&&i.inPlace(r,["handleEvent"],"fn-")}}),o.on("removeEventListener-start",function(t){var e=this.wrapped;e&&(t[1]=e)})},{1:22,ee:"QJf3ax",gos:"7eSDFh"}],6:[function(t,e){var n=t("ee").create(),r=t(1)(n);e.exports=n,r.inPlace(window,["requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame"],"raf-"),n.on("raf-start",function(t){t[0]=r(t[0],"fn-")})},{1:22,ee:"QJf3ax"}],7:[function(t,e){function n(t,e,n){t[0]=i(t[0],"fn-",null,n)}function r(t,e,n){function r(){return a}this.ctx={};var a={"nr@context":this.ctx};o.emit("initTimerContext",[t,n],a),t[0]=i(t[0],"fn-",r,n)}var o=t("ee").create(),i=t(1)(o);e.exports=o,i.inPlace(window,["setTimeout","setImmediate"],"setTimer-"),i.inPlace(window,["setInterval"],"setInterval-"),i.inPlace(window,["clearTimeout","clearImmediate"],"clearTimeout-"),o.on("setInterval-start",n),o.on("setTimer-start",r)},{1:22,ee:"QJf3ax"}],8:[function(t,e){function n(){f.inPlace(this,p,"fn-",o)}function r(t,e){f.inPlace(e,["onreadystatechange"],"fn-")}function o(t,e){return e}function i(t,e){for(var n in t)e[n]=t[n];return e}var a=t("ee").create(),s=t(1),c=t(2),f=c(a),u=c(s),d=window.XMLHttpRequest,p=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"];e.exports=a,window.XMLHttpRequest=function(t){var e=new d(t);try{a.emit("new-xhr",[],e),e.hasOwnProperty("addEventListener")&&u.inPlace(e,["addEventListener","removeEventListener"],"-",o),e.addEventListener("readystatechange",n,!1)}catch(r){try{a.emit("internal-error",[r])}catch(i){}}return e},i(d,XMLHttpRequest),XMLHttpRequest.prototype=d.prototype,f.inPlace(XMLHttpRequest.prototype,["open","send"],"-xhr-",o),a.on("send-xhr-start",r),a.on("open-xhr-start",r)},{1:5,2:22,ee:"QJf3ax"}],9:[function(t){function e(t){var e=this.params,r=this.metrics;if(!this.ended){this.ended=!0;for(var i=0;c>i;i++)t.removeEventListener(s[i],this.listener,!1);if(!e.aborted){if(r.duration=(new Date).getTime()-this.startTime,4===t.readyState){e.status=t.status;var a=t.responseType,f="arraybuffer"===a||"blob"===a||"json"===a?t.response:t.responseText,u=n(f);if(u&&(r.rxSize=u),this.sameOrigin){var d=t.getResponseHeader("X-NewRelic-App-Data");d&&(e.cat=d.split(", ").pop())}}else e.status=0;r.cbTime=this.cbTime,o("xhr",[e,r,this.startTime])}}}function n(t){if("string"==typeof t&&t.length)return t.length;if("object"!=typeof t)return void 0;if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if("undefined"!=typeof FormData&&t instanceof FormData)return void 0;try{return JSON.stringify(t).length}catch(e){return void 0}}function r(t,e){var n=i(e),r=t.params;r.host=n.hostname+":"+n.port,r.pathname=n.pathname,t.sameOrigin=n.sameOrigin}if(window.XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.addEventListener&&!/CriOS/.test(navigator.userAgent)){t("loader").features.xhr=!0;var o=t("handle"),i=t(2),a=t("ee"),s=["load","error","abort","timeout"],c=s.length,f=t(1),u=window.XMLHttpRequest;t(4),t(3),a.on("new-xhr",function(){this.totalCbs=0,this.called=0,this.cbTime=0,this.end=e,this.ended=!1,this.xhrGuids={}}),a.on("open-xhr-start",function(t){this.params={method:t[0]},r(this,t[1]),this.metrics={}}),a.on("open-xhr-end",function(t,e){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&e.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),a.on("send-xhr-start",function(t,e){var r=this.metrics,o=t[0],i=this;if(r&&o){var f=n(o);f&&(r.txSize=f)}this.startTime=(new Date).getTime(),this.listener=function(t){try{"abort"===t.type&&(i.params.aborted=!0),("load"!==t.type||i.called===i.totalCbs&&(i.onloadCalled||"function"!=typeof e.onload))&&i.end(e)}catch(n){try{a.emit("internal-error",[n])}catch(r){}}};for(var u=0;c>u;u++)e.addEventListener(s[u],this.listener,!1)}),a.on("xhr-cb-time",function(t,e,n){this.cbTime+=t,e?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),a.on("xhr-load-added",function(t,e){var n=""+f(t)+!!e;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),a.on("xhr-load-removed",function(t,e){var n=""+f(t)+!!e;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),a.on("addEventListener-end",function(t,e){e instanceof u&&"load"===t[0]&&a.emit("xhr-load-added",[t[1],t[2]],e)}),a.on("removeEventListener-end",function(t,e){e instanceof u&&"load"===t[0]&&a.emit("xhr-load-removed",[t[1],t[2]],e)}),a.on("fn-start",function(t,e,n){e instanceof u&&("onload"===n&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=(new Date).getTime()))}),a.on("fn-end",function(t,e){this.xhrCbStart&&a.emit("xhr-cb-time",[(new Date).getTime()-this.xhrCbStart,this.onload,e],e)})}},{1:"XL7HBI",2:10,3:8,4:5,ee:"QJf3ax",handle:"D5DuLP",loader:"G9z0Bl"}],10:[function(t,e){e.exports=function(t){var e=document.createElement("a"),n=window.location,r={};e.href=t,r.port=e.port;var o=e.href.split("://");return!r.port&&o[1]&&(r.port=o[1].split("/")[0].split("@").pop().split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=e.hostname||n.hostname,r.pathname=e.pathname,r.protocol=o[0],"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname),r.sameOrigin=!e.hostname||e.hostname===document.domain&&e.port===n.port&&e.protocol===n.protocol,r}},{}],11:[function(t,e){function n(t){return function(){r(t,[(new Date).getTime()].concat(i(arguments)))}}var r=t("handle"),o=t(1),i=t(2);"undefined"==typeof window.newrelic&&(newrelic=window.NREUM);var a=["setPageViewName","addPageAction","setCustomAttribute","finished","addToTrace","inlineHit","noticeError"];o(a,function(t,e){window.NREUM[e]=n("api-"+e)}),e.exports=window.NREUM},{1:20,2:21,handle:"D5DuLP"}],gos:[function(t,e){e.exports=t("7eSDFh")},{}],"7eSDFh":[function(t,e){function n(t,e,n){if(r.call(t,e))return t[e];var o=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,e,{value:o,writable:!0,enumerable:!1}),o}catch(i){}return t[e]=o,o}var r=Object.prototype.hasOwnProperty;e.exports=n},{}],D5DuLP:[function(t,e){function n(t,e,n){return r.listeners(t).length?r.emit(t,e,n):void(r.q&&(r.q[t]||(r.q[t]=[]),r.q[t].push(e)))}var r=t("ee").create();e.exports=n,n.ee=r,r.q={}},{ee:"QJf3ax"}],handle:[function(t,e){e.exports=t("D5DuLP")},{}],XL7HBI:[function(t,e){function n(t){var e=typeof t;return!t||"object"!==e&&"function"!==e?-1:t===window?0:i(t,o,function(){return r++})}var r=1,o="nr@id",i=t("gos");e.exports=n},{gos:"7eSDFh"}],id:[function(t,e){e.exports=t("XL7HBI")},{}],G9z0Bl:[function(t,e){function n(){var t=p.info=NREUM.info,e=f.getElementsByTagName("script")[0];if(t&&t.licenseKey&&t.applicationID&&e){s(d,function(e,n){e in t||(t[e]=n)});var n="https"===u.split(":")[0]||t.sslForHttp;p.proto=n?"https://":"http://",a("mark",["onload",i()]);var r=f.createElement("script");r.src=p.proto+t.agent,e.parentNode.insertBefore(r,e)}}function r(){"complete"===f.readyState&&o()}function o(){a("mark",["domContent",i()])}function i(){return(new Date).getTime()}var a=t("handle"),s=t(1),c=window,f=c.document;t(2);var u=(""+location).split("?")[0],d={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-768.min.js"},p=e.exports={offset:i(),origin:u,features:{}};f.addEventListener?(f.addEventListener("DOMContentLoaded",o,!1),c.addEventListener("load",n,!1)):(f.attachEvent("onreadystatechange",r),c.attachEvent("onload",n)),a("mark",["firstbyte",i()])},{1:20,2:11,handle:"D5DuLP"}],loader:[function(t,e){e.exports=t("G9z0Bl")},{}],20:[function(t,e){function n(t,e){var n=[],o="",i=0;for(o in t)r.call(t,o)&&(n[i]=e(o,t[o]),i+=1);return n}var r=Object.prototype.hasOwnProperty;e.exports=n},{}],21:[function(t,e){function n(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(0>o?0:o);++r<o;)i[r]=t[e+r];return i}e.exports=n},{}],22:[function(t,e){function n(t){return!(t&&"function"==typeof t&&t.apply&&!t[i])}var r=t("ee"),o=t(1),i="nr@original",a=Object.prototype.hasOwnProperty;e.exports=function(t){function e(t,e,r,a){function nrWrapper(){var n,i,s,f;try{i=this,n=o(arguments),s=r&&r(n,i)||{}}catch(d){u([d,"",[n,i,a],s])}c(e+"start",[n,i,a],s);try{return f=t.apply(i,n)}catch(p){throw c(e+"err",[n,i,p],s),p}finally{c(e+"end",[n,i,f],s)}}return n(t)?t:(e||(e=""),nrWrapper[i]=t,f(t,nrWrapper),nrWrapper)}function s(t,r,o,i){o||(o="");var a,s,c,f="-"===o.charAt(0);for(c=0;c<r.length;c++)s=r[c],a=t[s],n(a)||(t[s]=e(a,f?s+o:o,i,s))}function c(e,n,r){try{t.emit(e,n,r)}catch(o){u([o,e,n,r])}}function f(t,e){if(Object.defineProperty&&Object.keys)try{var n=Object.keys(t);return n.forEach(function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]=e,e}})}),e}catch(r){u([r])}for(var o in t)a.call(t,o)&&(e[o]=t[o]);return e}function u(e){try{t.emit("internal-error",e)}catch(n){}}return t||(t=r),e.inPlace=s,e.flag=i,e}},{1:21,ee:"QJf3ax"}]},{},["G9z0Bl",4,9]);</script><title>How to Create a Custom 2D Physics Engine: The Core Engine - Tuts+ Game Development Tutorial</title><link rel="canonical" href="./Seite2_files/Seite2.html"><link rel="shortcut icon" type="image/png" href="http://static.tutsplus.com/assets/favicon-8b86ba48e7f31535461f183680fe2ac9.png"><link rel="apple-touch-icon" type="image/png" href="http://static.tutsplus.com/assets/apple-touch-icon-8b86ba48e7f31535461f183680fe2ac9.png"><link rel="stylesheet" media="all" href="./Seite2_files/application-c6332caac06327fdd732b1bc87a01729.css"><script src="./Seite2_files/collect.js" async="async"></script><!--[if lte IE 8]><link rel="stylesheet" media="screen" href="http://static.tutsplus.com/assets/ie8-c38f02ec8bb258c2ffad66305bbebfc9.css" /><script src="http://static.tutsplus.com/assets/modernizr.custom-4191fa85b5ca7ff4a6e827bd9820bcec.js"></script><![endif]--><script src="./Seite2_files/application-b9a7fcba4cd70a5a9f63d982c85d6fa2.js"></script><link rel="alternate" type="application/atom+xml" title="Atom 1.0" href="http://tutsplus.com/posts.atom"><meta name="csrf-param" content="authenticity_token">
<meta name="csrf-token" content="7jqe+iN2epgB8D+2k0NueioseeIEI0YkCxmi8/ucbC8yaUC9Awjwk4poFKE+GxTHl6ET6tOdV0Q2GDMaAhfFLg=="><meta content="initial-scale=1" name="viewport"><meta content="index, follow" name="robots"><meta content="How to Create a Custom 2D Physics Engine: The Core Engine - Tuts+ Game Development Tutorial" property="og:title"><meta content="Game Development Tuts+" property="og:site_name"><meta content="1494084460809023" property="fb:app_id"><meta content="Implementation" name="ET.category"><meta content="In this part of my series on creating a custom 2D physics engine for your games, we&#39;ll add more features to the impulse resolution we got working in the first part. In particular, we&#39;ll look at integration, timestepping, using a modular design for our code, and broad phase collision detection. | Difficulty: Intermediate; Length: Medium; Tags: Implementation, Platform Agnostic, Cpp" property="og:description"><meta content="article" property="og:type"><meta content="http://gamedevelopment.tutsplus.com/tutorials/how-to-create-a-custom-2d-physics-engine-the-core-engine--gamedev-7493" property="og:url"><meta content="In this part of my series on creating a custom 2D physics engine for your games, we&#39;ll add more features to the impulse resolution we got working in the first part. In particular, we&#39;ll look at integration, timestepping, using a modular design for our code, and broad phase collision detection. | Difficulty: Intermediate; Length: Medium; Tags: Implementation, Platform Agnostic, Cpp" name="description"><meta content="https://cdn.tutsplus.com/gamedev/authors/randy-gaul/custom-physics-logo.png" property="og:image"><style type="text/css"></style><script src="./Seite2_files/pubads_impl_74.js" async=""></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Hover_Arrow {position: absolute; width: 15px; height: 11px; cursor: pointer}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; color: #666666}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_Menu_Close {position: absolute; width: 31px; height: 31px; top: -15px; left: -15px}
</style><style type="text/css">.MathJax_Preview .MJXc-math {color: inherit!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><script type="text/javascript" async="" src="./Seite2_files/embed.js"></script><script async="" type="text/javascript" src="./Seite2_files/count.js"></script><script type="text/javascript" async="" src="./Seite2_files/saved_resource"></script><style type="text/css"></style><style type="text/css">.MJXc-script {font-size: .8em}
.MJXc-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXc-bold {font-weight: bold}
.MJXc-italic {font-style: italic}
.MJXc-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXc-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXc-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXc-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXc-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXc-largeop {font-size: 150%}
.MJXc-largeop.MJXc-int {vertical-align: -.2em}
.MJXc-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXc-display {display: block; text-align: center; margin: 1em 0}
.MJXc-math span {display: inline-block}
.MJXc-box {display: block!important; text-align: center}
.MJXc-box:after {content: " "}
.MJXc-rule {display: block!important; margin-top: .1em}
.MJXc-char {display: block!important}
.MJXc-mo {margin: 0 .15em}
.MJXc-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXc-denom {display: inline-table!important; width: 100%}
.MJXc-denom > * {display: table-row!important}
.MJXc-surd {vertical-align: top}
.MJXc-surd > * {display: block!important}
.MJXc-script-box > *  {display: table!important; height: 50%}
.MJXc-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXc-script-box > *:last-child > * {vertical-align: bottom}
.MJXc-script-box > * > * > * {display: block!important}
.MJXc-mphantom {visibility: hidden}
.MJXc-munderover {display: inline-table!important}
.MJXc-over {display: inline-block!important; text-align: center}
.MJXc-over > * {display: block!important}
.MJXc-munderover > * {display: table-row!important}
.MJXc-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXc-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXc-mtr {display: table-row!important}
.MJXc-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXc-mtr > .MJXc-mtd:first-child {padding-left: 0}
.MJXc-mtr:first-child > .MJXc-mtd {padding-top: 0}
.MJXc-mlabeledtr {display: table-row!important}
.MJXc-mlabeledtr > .MJXc-mtd:first-child {padding-left: 0}
.MJXc-mlabeledtr:first-child > .MJXc-mtd {padding-top: 0}
.MJXc-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXc-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXc-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXc-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXc-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXc-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXc-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXc-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXc-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXc-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXc-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_CHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><script src="./Seite2_files/count-data.js"></script><style type="text/css">.MathJax_Display {text-align: center; margin: 1em 0em; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MathJax .MJX-monospace {font-family: monospace}
.MathJax .MJX-sans-serif {font-family: sans-serif}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0!important; padding: 0!important; margin: 0!important; vertical-align: 0!important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none}
.MathJax nobr {white-space: nowrap!important}
.MathJax img {display: inline!important; float: none!important}
.MathJax * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_ExBox {display: block!important; overflow: hidden; width: 1px; height: 60ex; min-height: 0; max-height: none}
.MathJax .MathJax_EmBox {display: block!important; overflow: hidden; width: 1px; height: 60em; min-height: 0; max-height: none}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Main; src: url('http://cdn.mathjax.org/mathjax/latest/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff?rev=2.5.3') format('woff'), url('http://cdn.mathjax.org/mathjax/latest/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf?rev=2.5.3') format('opentype')}
@font-face {font-family: MathJax_Main-bold; src: url('http://cdn.mathjax.org/mathjax/latest/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff?rev=2.5.3') format('woff'), url('http://cdn.mathjax.org/mathjax/latest/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf?rev=2.5.3') format('opentype')}
@font-face {font-family: MathJax_Main-italic; src: url('http://cdn.mathjax.org/mathjax/latest/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff?rev=2.5.3') format('woff'), url('http://cdn.mathjax.org/mathjax/latest/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf?rev=2.5.3') format('opentype')}
@font-face {font-family: MathJax_Math-italic; src: url('http://cdn.mathjax.org/mathjax/latest/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff?rev=2.5.3') format('woff'), url('http://cdn.mathjax.org/mathjax/latest/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf?rev=2.5.3') format('opentype')}
@font-face {font-family: MathJax_Caligraphic; src: url('http://cdn.mathjax.org/mathjax/latest/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff?rev=2.5.3') format('woff'), url('http://cdn.mathjax.org/mathjax/latest/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf?rev=2.5.3') format('opentype')}
@font-face {font-family: MathJax_Size1; src: url('http://cdn.mathjax.org/mathjax/latest/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff?rev=2.5.3') format('woff'), url('http://cdn.mathjax.org/mathjax/latest/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf?rev=2.5.3') format('opentype')}
@font-face {font-family: MathJax_Size2; src: url('http://cdn.mathjax.org/mathjax/latest/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff?rev=2.5.3') format('woff'), url('http://cdn.mathjax.org/mathjax/latest/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf?rev=2.5.3') format('opentype')}
@font-face {font-family: MathJax_Size3; src: url('http://cdn.mathjax.org/mathjax/latest/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff?rev=2.5.3') format('woff'), url('http://cdn.mathjax.org/mathjax/latest/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf?rev=2.5.3') format('opentype')}
@font-face {font-family: MathJax_Size4; src: url('http://cdn.mathjax.org/mathjax/latest/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff?rev=2.5.3') format('woff'), url('http://cdn.mathjax.org/mathjax/latest/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf?rev=2.5.3') format('opentype')}
.MathJax .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><script type="text/javascript" async="" src="./Seite2_files/link"></script><script type="text/javascript" async="" src="./Seite2_files/track.php"></script><style type="text/css">@font-face {font-family: MathJax_AMS; src: url('http://cdn.mathjax.org/mathjax/latest/fonts/HTML-CSS/TeX/woff/MathJax_AMS-Regular.woff?rev=2.5.3') format('woff'), url('http://cdn.mathjax.org/mathjax/latest/fonts/HTML-CSS/TeX/otf/MathJax_AMS-Regular.otf?rev=2.5.3') format('opentype')}
</style></head><body class="page-body topic-gamedevelopment" data-ga-account="UA-11792865-37" data-ga-domain="tutsplus.com" data-wt-dcsid="dcs222cpd4g6lg7wb3cum8l5g_6w6m"><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div id="MathJax_Message" style="display: none;"></div><!--[if lt IE 10]><div class="legacy-ie-banner"><h2 class="legacy-ie-banner__title">Unsupported browser</h2><p class="legacy-ie-banner__text">This site was designed for modern browsers and tested with Internet Explorer version 10 and later. </p><p class="legacy-ie-banner__text">It may not look or work correctly on your browser. </p></div><![endif]--><nav class="global-nav view view--loaded"><div class="global-nav__mobile"><section class="global-nav__mobile-search"><form action="http://tutsplus.com/tutorials/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="✓"><input type="text" name="search[terms]" id="search_terms" placeholder="Search Tuts+" class="global-nav__mobile-search-terms"><button name="button" type="submit" class="global-nav__mobile-search-button"><i class="fa fa-search"></i></button></form></section><ul class="global-nav__mobile-top-level"><li class="global-nav__mobile-top-level-item global-nav__mobile-top-level-item--expanded"><a class="global-nav__mobile-top-level-link global-nav__mobile-top-level-link-expandable" href="http://tutsplus.com/tutorials"><span class="global-nav__mobile-top-level-link-title">Free Tutorials</span></a><a class="global-nav__mobile-top-level-link global-nav__mobile-top-level-expansion-link" href="http://gamedevelopment.tutsplus.com/tutorials/how-to-create-a-custom-2d-physics-engine-the-core-engine--gamedev-7493#"><span class="global-nav__mobile-top-level-expand-text"><i class="fa fa-plus global-nav__mobile-top-level-link-icon"></i></span><span class="global-nav__mobile-top-level-collapse-text"><i class="fa fa-minus global-nav__mobile-top-level-link-icon"></i></span></a><ul class="global-nav__mobile-second-level"><li class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-design" href="http://design.tutsplus.com/">Design &amp; Illustration</a></li><li class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-code" href="http://code.tutsplus.com/">Code</a></li><li class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-webdesign" href="http://webdesign.tutsplus.com/">Web Design</a></li><li class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-photography" href="http://photography.tutsplus.com/">Photo &amp; Video</a></li><li class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-music" href="http://music.tutsplus.com/">Music &amp; Audio</a></li><li class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-cgi" href="http://cgi.tutsplus.com/">3D &amp; Motion Graphics</a></li><li class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-gamedevelopment" href="http://gamedevelopment.tutsplus.com/">Game Development</a></li><li class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-computers" href="http://computers.tutsplus.com/">Computer Skills</a></li><li class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-business" href="http://business.tutsplus.com/">Business</a></li></ul></li><li class="global-nav__mobile-top-level-item"><a class="global-nav__mobile-top-level-link global-nav__mobile-top-level-link-expandable" href="http://tutsplus.com/courses"><span class="global-nav__mobile-top-level-link-title">Courses</span></a><a class="global-nav__mobile-top-level-link global-nav__mobile-top-level-expansion-link" href="http://gamedevelopment.tutsplus.com/tutorials/how-to-create-a-custom-2d-physics-engine-the-core-engine--gamedev-7493#"><span class="global-nav__mobile-top-level-expand-text"><i class="fa fa-plus global-nav__mobile-top-level-link-icon"></i></span><span class="global-nav__mobile-top-level-collapse-text"><i class="fa fa-minus global-nav__mobile-top-level-link-icon"></i></span></a><div class="global-nav__mobile-second-level"><div class="global-nav__mobile-second-level-item"></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-design" href="http://design.tutsplus.com/courses">Design &amp; Illustration</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-code" href="http://code.tutsplus.com/courses">Code</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-webdesign" href="http://webdesign.tutsplus.com/courses">Web Design</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-photography" href="http://photography.tutsplus.com/courses">Photo &amp; Video</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-music" href="http://music.tutsplus.com/courses">Music &amp; Audio</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-cgi" href="http://cgi.tutsplus.com/courses">3D &amp; Motion Graphics</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-business" href="http://business.tutsplus.com/courses">Business</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-bundles-link" href="http://tutsplus.com/bundles"><span class="translation_missing" title="translation missing: en.views.courses.courses_menu.bundles">Bundles</span></a></div></div></li><li class="global-nav__mobile-top-level-item"><a class="global-nav__mobile-top-level-link global-nav__mobile-top-level-link-expandable" href="http://tutsplus.com/ebooks"><span class="global-nav__mobile-top-level-link-title">eBooks</span></a><a class="global-nav__mobile-top-level-link global-nav__mobile-top-level-expansion-link" href="http://gamedevelopment.tutsplus.com/tutorials/how-to-create-a-custom-2d-physics-engine-the-core-engine--gamedev-7493#"><span class="global-nav__mobile-top-level-expand-text"><i class="fa fa-plus global-nav__mobile-top-level-link-icon"></i></span><span class="global-nav__mobile-top-level-collapse-text"><i class="fa fa-minus global-nav__mobile-top-level-link-icon"></i></span></a><div class="global-nav__mobile-second-level"><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-design" href="http://design.tutsplus.com/ebooks">Design &amp; Illustration</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-code" href="http://code.tutsplus.com/ebooks">Code</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-webdesign" href="http://webdesign.tutsplus.com/ebooks">Web Design</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-photography" href="http://photography.tutsplus.com/ebooks">Photo &amp; Video</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-music" href="http://music.tutsplus.com/ebooks">Music &amp; Audio</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-cgi" href="http://cgi.tutsplus.com/ebooks">3D &amp; Motion Graphics</a></div><div class="global-nav__mobile-second-level-item"><a class="global-nav__mobile-second-level-topic-link topic-business" href="http://business.tutsplus.com/ebooks">Business</a></div></div></li></ul><div class="global-nav__mobile-pricing-button-container"><a class="global-nav__mobile-pricing-button" href="http://tutsplus.com/sign_up">Free Account</a></div><div class="global-nav__mobile-user-links"><a class="global-nav__mobile-user-link" href="https://tutsplus.com/sign_up?redirect_to=https%3A%2F%2Fgamedevelopment.tutsplus.com%2Ftutorials%2Fhow-to-create-a-custom-2d-physics-engine-the-core-engine--gamedev-7493">Sign Up</a><a class="global-nav__mobile-user-link" href="https://tutsplus.com/sign_in?redirect_to=https%3A%2F%2Fgamedevelopment.tutsplus.com%2Ftutorials%2Fhow-to-create-a-custom-2d-physics-engine-the-core-engine--gamedev-7493">Sign In</a></div></div><div class="global-nav__header"><div class="global-nav__header-content"><div class="global-nav__header-left"><a class="global-nav__header-tuts-logo-link" href="http://tutsplus.com/"><img alt="envato-tuts+" class="global-nav__header-envato-logo-image" src="./Seite2_files/envato_leaf-838199982ec672b34b0f8e093761e858.svg"><img alt="envato-tuts+" class="global-nav__header-tuts-logo-image" src="./Seite2_files/tuts_logo-b4f5f5fad9a5f4b3f91e3b770689a808.svg"></a><form class="global-nav__search" action="http://tutsplus.com/tutorials/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="✓"><div class="global-nav__search-topic-container"><select name="search[topic]" id="search_topic" class="global-nav__search-topic"><option value="">All Topics</option>
<option value="Design &amp; Illustration">Design &amp; Illustration</option>
<option value="Code">Code</option>
<option value="Web Design">Web Design</option>
<option value="Photo &amp; Video">Photo &amp; Video</option>
<option value="Music &amp; Audio">Music &amp; Audio</option>
<option value="3D &amp; Motion Graphics">3D &amp; Motion Graphics</option>
<option value="Game Development">Game Development</option>
<option value="Computer Skills">Computer Skills</option>
<option value="Crafts &amp; DIY">Crafts &amp; DIY</option>
<option value="Business">Business</option></select></div><div class="global-nav__search-terms-container"><span class="twitter-typeahead" style="position: relative; display: inline-block; direction: ltr;"><input type="text" class="global-nav__search-terms tt-hint" readonly="" autocomplete="off" spellcheck="false" tabindex="-1" style="position: absolute; top: 0px; left: 0px; border-color: transparent; box-shadow: none; opacity: 1; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);"><input type="text" name="search[terms]" id="search_terms" placeholder="Find tutorials, courses, and more..." class="global-nav__search-terms tt-input" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top; background-color: transparent;"><pre aria-hidden="true" style="position: absolute; visibility: hidden; white-space: pre; font-family: Arial; font-size: 12px; font-style: normal; font-variant: normal; font-weight: 400; word-spacing: 0px; letter-spacing: 0px; text-indent: 0px; text-rendering: auto; text-transform: none;"></pre><span class="tt-dropdown-menu" style="position: absolute; top: 100%; left: 0px; z-index: 100; display: none; right: auto;"><div class="tt-dataset-search"></div></span></span></div><button name="button" type="submit" class="global-nav__search-button"><div class="icon fa fa-search global-nav__search-icon"></div></button></form><ul class="global-nav__header-list"><li class="global-nav__header-item"><nav class="topics-menu view view--loaded" data-toggle=".topics-menu__dropdown-toggle"><a class="topics-menu__dropdown-toggle global-nav__header-link global-nav__header-link--primary global-nav__header-link--active" href="http://tutsplus.com/tutorials">Tutorials<i class="fa fa-chevron-down"></i></a><ul class="topics-menu__topics"><li class="topics-menu__topic topic-design" data-slug="design"><a class="topics-menu__topic-link topic-design" href="http://design.tutsplus.com/">Design &amp; Illustration<i class="fa fa-chevron-right topics-menu__topic-link-chevron"></i></a><div class="topics-menu__topic-submenu topic-design"><span class="topics-menu__submenu-title"><a class="topics-menu__submenu-title-link topic-link topic-design" href="http://design.tutsplus.com/">Design &amp; Illustration</a></span><ul class="topics-menu__featured-categories"><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-design hello" href="http://design.tutsplus.com/categories/vector">Vector</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-design hello" href="http://design.tutsplus.com/categories/adobe-photoshop">Adobe Photoshop</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-design hello" href="http://design.tutsplus.com/categories/adobe-illustrator">Adobe Illustrator</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-design hello" href="http://design.tutsplus.com/categories/illustration">Illustration</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-design hello" href="http://design.tutsplus.com/categories/tools-tips">Tools &amp; Tips</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-design hello" href="http://design.tutsplus.com/categories/inspiration">Inspiration</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-design hello" href="http://design.tutsplus.com/categories/news">News</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-design hello" href="http://design.tutsplus.com/categories/designing">Designing</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-design hello" href="http://design.tutsplus.com/categories/text-effects">Text Effects</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-design hello" href="http://design.tutsplus.com/categories/drawing">Drawing</a></li></ul><a class="topics-menu__more-categories-link topic-design" href="http://design.tutsplus.com/categories">More Categories...</a><ul class="topics-menu__submenu-footer-links topic-design"><li class="topics-menu__submenu-footer-item"><a class="topics-menu__submenu-footer-link topic-design" href="http://design.tutsplus.com/series">Learning Guides</a></li></ul></div></li><li class="topics-menu__topic topic-code" data-slug="code"><a class="topics-menu__topic-link topic-code" href="http://code.tutsplus.com/">Code<i class="fa fa-chevron-right topics-menu__topic-link-chevron"></i></a><div class="topics-menu__topic-submenu topic-code"><span class="topics-menu__submenu-title"><a class="topics-menu__submenu-title-link topic-link topic-code" href="http://code.tutsplus.com/">Code</a></span><ul class="topics-menu__featured-categories"><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-code hello" href="http://code.tutsplus.com/categories/web-development">Web Development</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-code hello" href="http://code.tutsplus.com/categories/wordpress">WordPress</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-code hello" href="http://code.tutsplus.com/categories/mobile-development">Mobile Development</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-code hello" href="http://code.tutsplus.com/categories/php">PHP</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-code hello" href="http://code.tutsplus.com/categories/flash">Flash</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-code hello" href="http://code.tutsplus.com/categories/javascript">JavaScript</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-code hello" href="http://code.tutsplus.com/categories/news">News</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-code hello" href="http://code.tutsplus.com/categories/ios-sdk">iOS SDK</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-code hello" href="http://code.tutsplus.com/categories/android-sdk">Android SDK</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-code hello" href="http://code.tutsplus.com/categories/cms">CMS</a></li></ul><a class="topics-menu__more-categories-link topic-code" href="http://code.tutsplus.com/categories">More Categories...</a><ul class="topics-menu__submenu-footer-links topic-code"><li class="topics-menu__submenu-footer-item"><a class="topics-menu__submenu-footer-link topic-code" href="http://code.tutsplus.com/series">Learning Guides</a></li></ul></div></li><li class="topics-menu__topic topic-webdesign" data-slug="webdesign"><a class="topics-menu__topic-link topic-webdesign" href="http://webdesign.tutsplus.com/">Web Design<i class="fa fa-chevron-right topics-menu__topic-link-chevron"></i></a><div class="topics-menu__topic-submenu topic-webdesign"><span class="topics-menu__submenu-title"><a class="topics-menu__submenu-title-link topic-link topic-webdesign" href="http://webdesign.tutsplus.com/">Web Design</a></span><ul class="topics-menu__featured-categories"><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-webdesign hello" href="http://webdesign.tutsplus.com/categories/css">CSS</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-webdesign hello" href="http://webdesign.tutsplus.com/categories/html-css">HTML &amp; CSS</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-webdesign hello" href="http://webdesign.tutsplus.com/categories/adobe-photoshop">Adobe Photoshop</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-webdesign hello" href="http://webdesign.tutsplus.com/categories/html">HTML</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-webdesign hello" href="http://webdesign.tutsplus.com/categories/complete-websites">Complete Websites</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-webdesign hello" href="http://webdesign.tutsplus.com/categories/workflow">Workflow</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-webdesign hello" href="http://webdesign.tutsplus.com/categories/design-theory">Design Theory</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-webdesign hello" href="http://webdesign.tutsplus.com/categories/ui-design">UI Design</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-webdesign hello" href="http://webdesign.tutsplus.com/categories/general">General</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-webdesign hello" href="http://webdesign.tutsplus.com/categories/blog">Blog</a></li></ul><a class="topics-menu__more-categories-link topic-webdesign" href="http://webdesign.tutsplus.com/categories">More Categories...</a><ul class="topics-menu__submenu-footer-links topic-webdesign"><li class="topics-menu__submenu-footer-item"><a class="topics-menu__submenu-footer-link topic-webdesign" href="http://webdesign.tutsplus.com/series">Learning Guides</a></li></ul></div></li><li class="topics-menu__topic topic-photography" data-slug="photography"><a class="topics-menu__topic-link topic-photography" href="http://photography.tutsplus.com/">Photo &amp; Video<i class="fa fa-chevron-right topics-menu__topic-link-chevron"></i></a><div class="topics-menu__topic-submenu topic-photography"><span class="topics-menu__submenu-title"><a class="topics-menu__submenu-title-link topic-link topic-photography" href="http://photography.tutsplus.com/">Photo &amp; Video</a></span><ul class="topics-menu__featured-categories"><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-photography hello" href="http://photography.tutsplus.com/categories/shooting">Shooting</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-photography hello" href="http://photography.tutsplus.com/categories/post-processing">Post-Processing</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-photography hello" href="http://photography.tutsplus.com/categories/photo-critique">Photo Critique</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-photography hello" href="http://photography.tutsplus.com/categories/adobe-photoshop">Adobe Photoshop</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-photography hello" href="http://photography.tutsplus.com/categories/inspiration">Inspiration</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-photography hello" href="http://photography.tutsplus.com/categories/lighting">Lighting</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-photography hello" href="http://photography.tutsplus.com/categories/news">News</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-photography hello" href="http://photography.tutsplus.com/categories/adobe-lightroom">Adobe Lightroom</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-photography hello" href="http://photography.tutsplus.com/categories/lectures">Lectures</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-photography hello" href="http://photography.tutsplus.com/categories/speedlights">Speedlights</a></li></ul><a class="topics-menu__more-categories-link topic-photography" href="http://photography.tutsplus.com/categories">More Categories...</a><ul class="topics-menu__submenu-footer-links topic-photography"><li class="topics-menu__submenu-footer-item"><a class="topics-menu__submenu-footer-link topic-photography" href="http://photography.tutsplus.com/series">Learning Guides</a></li></ul></div></li><li class="topics-menu__topic topic-music" data-slug="music"><a class="topics-menu__topic-link topic-music" href="http://music.tutsplus.com/">Music &amp; Audio<i class="fa fa-chevron-right topics-menu__topic-link-chevron"></i></a><div class="topics-menu__topic-submenu topic-music"><span class="topics-menu__submenu-title"><a class="topics-menu__submenu-title-link topic-link topic-music" href="http://music.tutsplus.com/">Music &amp; Audio</a></span><ul class="topics-menu__featured-categories"><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-music hello" href="http://music.tutsplus.com/categories/audio-production">Audio Production</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-music hello" href="http://music.tutsplus.com/categories/general">General</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-music hello" href="http://music.tutsplus.com/categories/logic-pro">Logic Pro</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-music hello" href="http://music.tutsplus.com/categories/workshops">Workshops</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-music hello" href="http://music.tutsplus.com/categories/mixing-mastering">Mixing &amp; Mastering</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-music hello" href="http://music.tutsplus.com/categories/open-mic">Open Mic</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-music hello" href="http://music.tutsplus.com/categories/sound-design">Sound Design</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-music hello" href="http://music.tutsplus.com/categories/ableton-live">Ableton Live</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-music hello" href="http://music.tutsplus.com/categories/reason">Reason</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-music hello" href="http://music.tutsplus.com/categories/recording">Recording</a></li></ul><a class="topics-menu__more-categories-link topic-music" href="http://music.tutsplus.com/categories">More Categories...</a><ul class="topics-menu__submenu-footer-links topic-music"><li class="topics-menu__submenu-footer-item"><a class="topics-menu__submenu-footer-link topic-music" href="http://music.tutsplus.com/series">Learning Guides</a></li></ul></div></li><li class="topics-menu__topic topic-cgi" data-slug="cgi"><a class="topics-menu__topic-link topic-cgi" href="http://cgi.tutsplus.com/">3D &amp; Motion Graphics<i class="fa fa-chevron-right topics-menu__topic-link-chevron"></i></a><div class="topics-menu__topic-submenu topic-cgi"><span class="topics-menu__submenu-title"><a class="topics-menu__submenu-title-link topic-link topic-cgi" href="http://cgi.tutsplus.com/">3D &amp; Motion Graphics</a></span><ul class="topics-menu__featured-categories"><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-cgi hello" href="http://cgi.tutsplus.com/categories/adobe-after-effects">Adobe After Effects</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-cgi hello" href="http://cgi.tutsplus.com/categories/3d">3D</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-cgi hello" href="http://cgi.tutsplus.com/categories/motion-graphics">Motion Graphics</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-cgi hello" href="http://cgi.tutsplus.com/categories/3d-studio-max">3D Studio Max</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-cgi hello" href="http://cgi.tutsplus.com/categories/cinema-4d">Cinema 4D</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-cgi hello" href="http://cgi.tutsplus.com/categories/maya">Maya</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-cgi hello" href="http://cgi.tutsplus.com/categories/workflow">Workflow</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-cgi hello" href="http://cgi.tutsplus.com/categories/news">News</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-cgi hello" href="http://cgi.tutsplus.com/categories/visual-effects">Visual Effects</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-cgi hello" href="http://cgi.tutsplus.com/categories/roundup">Roundup</a></li></ul><a class="topics-menu__more-categories-link topic-cgi" href="http://cgi.tutsplus.com/categories">More Categories...</a><ul class="topics-menu__submenu-footer-links topic-cgi"><li class="topics-menu__submenu-footer-item"><a class="topics-menu__submenu-footer-link topic-cgi" href="http://cgi.tutsplus.com/series">Learning Guides</a></li></ul></div></li><li class="topics-menu__topic topic-gamedevelopment" data-slug="gamedevelopment"><a class="topics-menu__topic-link topic-gamedevelopment" href="http://gamedevelopment.tutsplus.com/">Game Development<i class="fa fa-chevron-right topics-menu__topic-link-chevron"></i></a><div class="topics-menu__topic-submenu topic-gamedevelopment"><span class="topics-menu__submenu-title"><a class="topics-menu__submenu-title-link topic-link topic-gamedevelopment" href="http://gamedevelopment.tutsplus.com/">Game Development</a></span><ul class="topics-menu__featured-categories"><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-gamedevelopment hello" href="http://gamedevelopment.tutsplus.com/categories/game-design">Game Design</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-gamedevelopment hello" href="http://gamedevelopment.tutsplus.com/categories/implementation">Implementation</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-gamedevelopment hello" href="http://gamedevelopment.tutsplus.com/categories/platform-agnostic">Platform Agnostic</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-gamedevelopment hello" href="http://gamedevelopment.tutsplus.com/categories/business">Business</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-gamedevelopment hello" href="http://gamedevelopment.tutsplus.com/categories/programming">Programming</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-gamedevelopment hello" href="http://gamedevelopment.tutsplus.com/categories/flash">Flash</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-gamedevelopment hello" href="http://gamedevelopment.tutsplus.com/categories/from-scratch">From Scratch</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-gamedevelopment hello" href="http://gamedevelopment.tutsplus.com/categories/html5">HTML5</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-gamedevelopment hello" href="http://gamedevelopment.tutsplus.com/categories/news">News</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-gamedevelopment hello" href="http://gamedevelopment.tutsplus.com/categories/construct-2">Construct 2</a></li></ul><a class="topics-menu__more-categories-link topic-gamedevelopment" href="http://gamedevelopment.tutsplus.com/categories">More Categories...</a><ul class="topics-menu__submenu-footer-links topic-gamedevelopment"><li class="topics-menu__submenu-footer-item"><a class="topics-menu__submenu-footer-link topic-gamedevelopment" href="http://gamedevelopment.tutsplus.com/series">Learning Guides</a></li></ul></div></li><li class="topics-menu__topic topic-computers" data-slug="computers"><a class="topics-menu__topic-link topic-computers" href="http://computers.tutsplus.com/">Computer Skills<i class="fa fa-chevron-right topics-menu__topic-link-chevron"></i></a><div class="topics-menu__topic-submenu topic-computers"><span class="topics-menu__submenu-title"><a class="topics-menu__submenu-title-link topic-link topic-computers" href="http://computers.tutsplus.com/">Computer Skills</a></span><ul class="topics-menu__featured-categories"><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-computers hello" href="http://computers.tutsplus.com/categories/os-x">OS X</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-computers hello" href="http://computers.tutsplus.com/categories/app-training">App Training</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-computers hello" href="http://computers.tutsplus.com/categories/productivity">Productivity</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-computers hello" href="http://computers.tutsplus.com/categories/tips-shortcuts">Tips &amp; Shortcuts</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-computers hello" href="http://computers.tutsplus.com/categories/electronics">Electronics</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-computers hello" href="http://computers.tutsplus.com/categories/security">Security</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-computers hello" href="http://computers.tutsplus.com/categories/automation">Automation</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-computers hello" href="http://computers.tutsplus.com/categories/office">Office</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-computers hello" href="http://computers.tutsplus.com/categories/hardware">Hardware</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-computers hello" href="http://computers.tutsplus.com/categories/terminal">Terminal</a></li></ul><a class="topics-menu__more-categories-link topic-computers" href="http://computers.tutsplus.com/categories">More Categories...</a><ul class="topics-menu__submenu-footer-links topic-computers"><li class="topics-menu__submenu-footer-item"><a class="topics-menu__submenu-footer-link topic-computers" href="http://computers.tutsplus.com/series">Learning Guides</a></li></ul></div></li><li class="topics-menu__topic topic-business" data-slug="business"><a class="topics-menu__topic-link topic-business" href="http://business.tutsplus.com/">Business<i class="fa fa-chevron-right topics-menu__topic-link-chevron"></i></a><div class="topics-menu__topic-submenu topic-business"><span class="topics-menu__submenu-title"><a class="topics-menu__submenu-title-link topic-link topic-business" href="http://business.tutsplus.com/">Business</a></span><ul class="topics-menu__featured-categories"><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-business hello" href="http://business.tutsplus.com/categories/freelance">Freelance</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-business hello" href="http://business.tutsplus.com/categories/marketing">Marketing</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-business hello" href="http://business.tutsplus.com/categories/communication">Communication</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-business hello" href="http://business.tutsplus.com/categories/planning">Planning</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-business hello" href="http://business.tutsplus.com/categories/finance">Finance</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-business hello" href="http://business.tutsplus.com/categories/sales">Sales</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-business hello" href="http://business.tutsplus.com/categories/entrepreneurship">Entrepreneurship</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-business hello" href="http://business.tutsplus.com/categories/productivity">Productivity</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-business hello" href="http://business.tutsplus.com/categories/blogging">Blogging</a></li><li class="topics-menu__featured-category"><a class="topics-menu__featured-category-link topic-business hello" href="http://business.tutsplus.com/categories/career-development">Career Development</a></li></ul><a class="topics-menu__more-categories-link topic-business" href="http://business.tutsplus.com/categories">More Categories...</a><ul class="topics-menu__submenu-footer-links topic-business"><li class="topics-menu__submenu-footer-item"><a class="topics-menu__submenu-footer-link topic-business" href="http://business.tutsplus.com/series">Learning Guides</a></li></ul></div></li></ul></nav></li><li class="global-nav__header-item"><nav class="courses-menu view" data-toggle=".courses-menu__dropdown-toggle"><a class="courses-menu__dropdown-toggle global-nav__header-link global-nav__header-link--primary " href="http://tutsplus.com/courses">Courses<i class="fa fa-chevron-down"></i></a><ul class="courses-menu__topics"><li class="courses-menu__topic topic-design" data-slug="design"><a class="courses-menu__topic-link topic-design" href="http://design.tutsplus.com/courses">Design &amp; Illustration</a></li><li class="courses-menu__topic topic-code" data-slug="code"><a class="courses-menu__topic-link topic-code" href="http://code.tutsplus.com/courses">Code</a></li><li class="courses-menu__topic topic-webdesign" data-slug="webdesign"><a class="courses-menu__topic-link topic-webdesign" href="http://webdesign.tutsplus.com/courses">Web Design</a></li><li class="courses-menu__topic topic-photography" data-slug="photography"><a class="courses-menu__topic-link topic-photography" href="http://photography.tutsplus.com/courses">Photo &amp; Video</a></li><li class="courses-menu__topic topic-music" data-slug="music"><a class="courses-menu__topic-link topic-music" href="http://music.tutsplus.com/courses">Music &amp; Audio</a></li><li class="courses-menu__topic topic-cgi" data-slug="cgi"><a class="courses-menu__topic-link topic-cgi" href="http://cgi.tutsplus.com/courses">3D &amp; Motion Graphics</a></li><li class="courses-menu__topic topic-business" data-slug="business"><a class="courses-menu__topic-link topic-business" href="http://business.tutsplus.com/courses">Business</a></li><a class="courses-menu__topic-link courses-menu__bundles-link" href="http://tutsplus.com/bundles"><span class="translation_missing" title="translation missing: en.views.courses.courses_menu.bundles">Bundles</span></a></ul></nav></li><li class="global-nav__header-item"><nav class="ebooks-menu view" data-toggle=".ebooks-menu__dropdown-toggle"><a class="ebooks-menu__dropdown-toggle global-nav__header-link global-nav__header-link--primary " href="http://tutsplus.com/ebooks">eBooks<i class="fa fa-chevron-down"></i></a><ul class="ebooks-menu__topics"><li class="ebooks-menu__topic topic-design" data-slug="design"><a class="ebooks-menu__topic-link topic-design" href="http://design.tutsplus.com/ebooks">Design &amp; Illustration</a></li><li class="ebooks-menu__topic topic-code" data-slug="code"><a class="ebooks-menu__topic-link topic-code" href="http://code.tutsplus.com/ebooks">Code</a></li><li class="ebooks-menu__topic topic-webdesign" data-slug="webdesign"><a class="ebooks-menu__topic-link topic-webdesign" href="http://webdesign.tutsplus.com/ebooks">Web Design</a></li><li class="ebooks-menu__topic topic-photography" data-slug="photography"><a class="ebooks-menu__topic-link topic-photography" href="http://photography.tutsplus.com/ebooks">Photo &amp; Video</a></li><li class="ebooks-menu__topic topic-music" data-slug="music"><a class="ebooks-menu__topic-link topic-music" href="http://music.tutsplus.com/ebooks">Music &amp; Audio</a></li><li class="ebooks-menu__topic topic-cgi" data-slug="cgi"><a class="ebooks-menu__topic-link topic-cgi" href="http://cgi.tutsplus.com/ebooks">3D &amp; Motion Graphics</a></li><li class="ebooks-menu__topic topic-business" data-slug="business"><a class="ebooks-menu__topic-link topic-business" href="http://business.tutsplus.com/ebooks">Business</a></li></ul></nav></li><li class="global-nav__header-item"><a class="global-nav__header-link global-nav__header-link--primary global-nav__header-link--blog" href="http://tutsplus.com/blog">Blog</a></li></ul></div><div class="global-nav__header-right"><ul class="global-nav__header-list"><li class="global-nav__header-item"><a class="global-nav__header-link" href="http://tutsplus.com/pricing">Pricing</a></li><li class="global-nav__header-item"><a class="global-nav__header-link" href="https://tutsplus.com/sign_in?redirect_to=https%3A%2F%2Fgamedevelopment.tutsplus.com%2Ftutorials%2Fhow-to-create-a-custom-2d-physics-engine-the-core-engine--gamedev-7493">Sign In</a></li></ul><a class="global-nav__pricing-button" href="http://tutsplus.com/sign_up">Free Account</a></div></div></div><div class="global-nav__mobile-toggle"><a class="global-nav__mobile-toggle-link" href="javascript:"><i class="fa fa-reorder"></i></a></div></nav><div class="ad view ad--leaderboard"><div class="ad__wrapper"><div class="ad__content" id="div-gpt-1391730999055-0"><div id="google_ads_iframe_/11757429/hub_gamedev_leader_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/11757429/hub_gamedev_leader_0" name="google_ads_iframe_/11757429/hub_gamedev_leader_0" width="728" height="90" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" src="javascript:"<html><body style='background:transparent'></body></html>"" style="border: 0px; vertical-align: bottom;"></iframe></div></div><div class="ad__label">Advertisement</div></div></div><div class="page-content"><main class="content"><div class="section-header view view--loaded"><div class="section-header__navigation"><div class="section-header__topic"><a class="section-header__topic-link topic-link topic-gamedevelopment" href="http://gamedevelopment.tutsplus.com/"><div class="section-header__section-icon section-header__section-icon--tutorials"></div>Game Development</a></div><ul class="section-header__nav-links"><li class="section-header__nav-link section-header__nav-link--dropdown"><div class="section-header__categories-menu"><a class="section-header__categories-menu-toggle" href="javascript:"><span class="section-header__categories-menu-title">Categories</span> <i class="fa fa-chevron-down"></i></a><ul class="section-header__categories-menu-items"><li class="section-header__categories-menu-item"><a class="section-header__categories-menu-link" href="http://gamedevelopment.tutsplus.com/categories/game-design">Game Design</a></li><li class="section-header__categories-menu-item"><a class="section-header__categories-menu-link" href="http://gamedevelopment.tutsplus.com/categories/implementation">Implementation</a></li><li class="section-header__categories-menu-item"><a class="section-header__categories-menu-link" href="http://gamedevelopment.tutsplus.com/categories/platform-agnostic">Platform Agnostic</a></li><li class="section-header__categories-menu-item"><a class="section-header__categories-menu-link" href="http://gamedevelopment.tutsplus.com/categories/business">Business</a></li><li class="section-header__categories-menu-item"><a class="section-header__categories-menu-link" href="http://gamedevelopment.tutsplus.com/categories/programming">Programming</a></li><li class="section-header__categories-menu-item"><a class="section-header__categories-menu-link" href="http://gamedevelopment.tutsplus.com/categories/flash">Flash</a></li><li class="section-header__categories-menu-item"><a class="section-header__categories-menu-link" href="http://gamedevelopment.tutsplus.com/categories/from-scratch">From Scratch</a></li><li class="section-header__categories-menu-item"><a class="section-header__categories-menu-link" href="http://gamedevelopment.tutsplus.com/categories/html5">HTML5</a></li><li class="section-header__categories-menu-item"><a class="section-header__categories-menu-link" href="http://gamedevelopment.tutsplus.com/categories/news">News</a></li><li class="section-header__categories-menu-more"><a class="section-header__categories-menu-link section-header__categories-menu-more-link" href="http://gamedevelopment.tutsplus.com/categories">More...</a></li></ul></div></li><li class="section-header__nav-link section-header__nav-link--direct"><a href="http://gamedevelopment.tutsplus.com/categories">Categories</a></li><li class="section-header__nav-link section-header__nav-link--dropdown"><div class="section-header__learning-guides-menu"><a class="section-header__learning-guides-menu-toggle" href="javascript:"><span class="section-header__learning-guides-menu-title">Learning Guides</span> <i class="fa fa-chevron-down"></i></a><ul class="section-header__learning-guides-menu-items"><li class="section-header__learning-guides-menu-item"><a class="section-header__learning-guides-menu-link" href="http://gamedevelopment.tutsplus.com/series/beginners-guide-to-oop--gamedev-12703">Beginner's Guide to OOP</a></li><li class="section-header__learning-guides-menu-item"><a class="section-header__learning-guides-menu-link" href="http://gamedevelopment.tutsplus.com/series/create-ai-for-a-hockey-game-using-steering-behaviors--cms-604">Create AI for a Hockey Game Using Steering Behaviors</a></li><li class="section-header__learning-guides-menu-item"><a class="section-header__learning-guides-menu-link" href="http://gamedevelopment.tutsplus.com/series/making-your-first-game--gamedev-5252">Making Your First Game</a></li><li class="section-header__learning-guides-menu-item"><a class="section-header__learning-guides-menu-link" href="http://gamedevelopment.tutsplus.com/series/funding-your-indie-games-with-client-work--cms-605">Funding Your Indie Games With Client Work</a></li><li class="section-header__learning-guides-menu-item"><a class="section-header__learning-guides-menu-link" href="http://gamedevelopment.tutsplus.com/series/understanding-steering-behaviors--gamedev-12732">Understanding Steering Behaviors</a></li><li class="section-header__learning-guides-menu-item"><a class="section-header__learning-guides-menu-link" href="http://gamedevelopment.tutsplus.com/series/difficulty--gamedev-12713">Difficulty</a></li><li class="section-header__learning-guides-menu-item"><a class="section-header__learning-guides-menu-link" href="http://gamedevelopment.tutsplus.com/series/a-beginners-guide-to-coding-graphics-shaders--cms-834">A Beginner's Guide to Coding Graphics Shaders</a></li><li class="section-header__learning-guides-menu-item"><a class="section-header__learning-guides-menu-link" href="http://gamedevelopment.tutsplus.com/series/balancing-turn-based-rpgs--gamedev-12702">Balancing Turn-Based RPGs</a></li><li class="section-header__learning-guides-menu-more"><a class="section-header__learning-guides-menu-link section-header__learning-guides-menu-more-link" href="http://gamedevelopment.tutsplus.com/series">More...</a></li></ul></div></li><li class="section-header__nav-link section-header__nav-link--direct"><a href="http://gamedevelopment.tutsplus.com/series">Learning Guides</a></li><li class="section-header__nav-link"><a href="https://community.tutsplus.com/">Forum</a></li></ul></div></div><article class="post tutorial"><div class="layout__offset-content-with-sidebar layout__offset-content-with-sidebar--post"><div class="post__header"><div class="content-header view content-header--post view--loaded"><div class="content-header__category"><a class="content-header__category-link" href="http://gamedevelopment.tutsplus.com/categories/implementation">Implementation</a></div><h1 class="content-header__title nolinks">How to Create a Custom 2D Physics Engine: The Core Engine</h1><div class="content-header__publication-meta"><span class="content-header__author-by"></span>by <span class="content-header__author"><a class="content-header__author-link" rel="author" href="http://tutsplus.com/authors/randy-gaul">Randy Gaul</a></span><time class="content-header__publication-date" datetime="2013-05-01T14:30:00Z" title="1 May 2013">1 May 2013</time><span class="content-header__comment-count"><i class="icon tutsicon-comment content-header__comment-icon"></i><a data-disqus-identifier="7493 http://gamedev.tutsplus.com/?p=7493" class="content-header__comment-count-link" href="http://gamedevelopment.tutsplus.com/tutorials/how-to-create-a-custom-2d-physics-engine-the-core-engine--gamedev-7493#disqus_thread">26 Comments</a></span></div><div class="content-header__social-share-links"><ul class="social-share-links"><li class="social-share-links__item"><a title="Share on Facebook" class="social-share-links__link social-share-links__link--facebook" href="https://www.facebook.com/dialog/feed?app_id=1494084460809023&link=http%3A%2F%2Fgamedevelopment.tutsplus.com%2Ftutorials%2Fhow-to-create-a-custom-2d-physics-engine-the-core-engine--gamedev-7493&display=page&name=How%20to%20Create%20a%20Custom%202D%20Physics%20Engine%3A%20The%20Core%20Engine&redirect_uri=http%3A%2F%2Fgamedevelopment.tutsplus.com%2Ftutorials%2Fhow-to-create-a-custom-2d-physics-engine-the-core-engine--gamedev-7493"><i class="fa fa-facebook-square social-share-links__icon"></i><div class="social-share-links__count">4</div></a></li><li class="social-share-links__item"><a target="_blank" title="Share on Twitter" class="social-share-links__link social-share-links__link--twitter" href="https://twitter.com/intent/tweet?text=How%20to%20Create%20a%20Custom%202D%20Physics%20Engine%3A%20The%20Core%20Engine&url=http%3A%2F%2Fgamedevelopment.tutsplus.com%2Ftutorials%2Fhow-to-create-a-custom-2d-physics-engine-the-core-engine--gamedev-7493&via=tutsplus"><i class="fa fa-twitter social-share-links__icon"></i><div class="social-share-links__count">2</div></a></li><li class="social-share-links__item"><a target="_blank" title="Share on Google+" class="social-share-links__link social-share-links__link--google-plus" href="https://plus.google.com/share?url=http%3A%2F%2Fgamedevelopment.tutsplus.com%2Ftutorials%2Fhow-to-create-a-custom-2d-physics-engine-the-core-engine--gamedev-7493"><i class="fa fa-google-plus social-share-links__icon"></i><div class="social-share-links__count">10</div></a></li><li class="social-share-links__item"><a target="_blank" title="Pin on Pinterest" class="social-share-links__link social-share-links__link--pinterest" href="https://www.pinterest.com/pin/create/button/?url=http%3A%2F%2Fgamedevelopment.tutsplus.com%2Ftutorials%2Fhow-to-create-a-custom-2d-physics-engine-the-core-engine--gamedev-7493&description=How%20to%20Create%20a%20Custom%202D%20Physics%20Engine%3A%20The%20Core%20Engine&media=https%3A%2F%2Fcdn.tutsplus.com%2Fgamedev%2Fauthors%2Frandy-gaul%2Fcustom-physics-logo.png"><i class="fa fa-pinterest social-share-links__icon"></i><div class="social-share-links__count--blank">Share</div></a></li></ul></div></div></div><div class="post-body view view--loaded"><div class="post-body__series-navigation"><div class="post-body__series-navigation-description">This post is part of a series called <a href="http://gamedevelopment.tutsplus.com/series/how-to-create-a-custom-physics-engine--gamedev-12715">How to Create a Custom Physics Engine</a>.</div><div class="post-body__series-navigation-item"><a class="post-body__series-navigation-previous-link" href="http://gamedevelopment.tutsplus.com/tutorials/how-to-create-a-custom-2d-physics-engine-the-basics-and-impulse-resolution--gamedev-6331">How to Create a Custom 2D Physics Engine: The Basics and Impulse Resolution</a></div><div class="post-body__series-navigation-item"><a class="post-body__series-navigation-next-link" href="http://gamedevelopment.tutsplus.com/tutorials/how-to-create-a-custom-2d-physics-engine-friction-scene-and-jump-table--gamedev-7756">How to Create a Custom 2D Physics Engine: Friction, Scene and Jump Table</a></div></div><div class="post-body__body"><script async="" charset="utf-8" src="./Seite2_files/widgets.js"></script><div class="post-body__content"><p>In this part of my series on creating a custom 2D physics engine for your games, we'll add more features to the impulse resolution we got working in the first part. In particular, we'll look at integration, timestepping, using a modular design for our code, and broad phase collision detection.<!--more--></p>
<p><script type="text/javascript" src="./Seite2_files/MathJax.js"></script><iframe src="about:blank" width="0" height="0" style="visibility: hidden !important; display: none !important; opacity: 0 !important;"></iframe></p>
<hr>
<h2 class="nolinks">Introduction</h2>
<p>In the last post in this series I covered the topic of <a href="http://gamedev.tutsplus.com/tutorials/implementation/create-custom-2d-physics-engine-aabb-circle-impulse-resolution/">impulse resolution</a>. Read that first, if you haven't already!</p>
<p>Let's dive straight into the topics covered in this article. These topics are all of the&nbsp;necessities&nbsp;of any half-decent physics engine, so now is an appropriate time to build more features on top of the core resolution from the last article.</p>
<ul>
<li><a href="http://gamedevelopment.tutsplus.com/tutorials/how-to-create-a-custom-2d-physics-engine-the-core-engine--gamedev-7493#integration">Integration</a></li>
<li><a href="http://gamedevelopment.tutsplus.com/tutorials/how-to-create-a-custom-2d-physics-engine-the-core-engine--gamedev-7493#timestepping">Timestepping</a></li>
<li>
<a href="http://gamedevelopment.tutsplus.com/tutorials/how-to-create-a-custom-2d-physics-engine-the-core-engine--gamedev-7493#modulardesign">Modular Design</a>
<ul>
<li>Bodies</li>
<li>Shapes</li>
<li>Forces</li>
<li>Materials</li>
</ul>
</li>
<li>
<a href="http://gamedevelopment.tutsplus.com/tutorials/how-to-create-a-custom-2d-physics-engine-the-core-engine--gamedev-7493#broadphase">Broad Phase</a>
<ul>
<li>Contact pair duplicate culling</li>
<li>Layering</li>
</ul>
</li>
<li><a href="http://gamedevelopment.tutsplus.com/tutorials/how-to-create-a-custom-2d-physics-engine-the-core-engine--gamedev-7493#halfspace">Halfspace Intersection Test</a></li>
</ul>
<hr>
<h2 class="nolinks"><a name="integration">Integration</a></h2>
<p>Integration is entirely simple to implement, and there are very many areas on the internet that provide good information for iterative integration. This section will mostly show how to implement a proper integration function, and point to some different locations for further reading, if desired.</p>
<p>First it should be known what acceleration actually is. <a href="http://en.wikipedia.org/wiki/Newton%27s_laws_of_motion">Newton's Second Law</a> states:</p>
<p><span class="MathJax_Preview" style="color: inherit;"></span><div class="MathJax_Display"><span class="MathJax" id="MathJax-Element-1-Frame"><nobr><span class="math" id="MathJax-Span-1" role="math" style="width: 100%; display: inline-block; min-width: 6.201em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(3.18em 1000em 5.471em -999.997em); top: -4.008em; left: 0.003em; width: 100%;"><span class="mrow" id="MathJax-Span-2"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.18em 1000em 4.378em -999.997em); top: -4.008em; left: 50%; margin-left: -2.602em;"><span class="mi" id="MathJax-Span-3" style="font-family: MathJax_Math-italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-4" style="font-family: MathJax_Math-italic;">q<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-5" style="font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-6" style="font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-7" style="font-family: MathJax_Math-italic;">t</span><span class="mi" id="MathJax-Span-8" style="font-family: MathJax_Math-italic;">i</span><span class="mi" id="MathJax-Span-9" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-10" style="font-family: MathJax_Math-italic;">n</span><span class="mn" id="MathJax-Span-11" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-12" style="font-family: MathJax_Main; padding-left: 0.263em;">:</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.18em 1000em 4.169em -999.997em); top: -2.706em; left: 50%; margin-left: -1.716em;"><span class="mspace" id="MathJax-Span-13" style="height: 0.003em; vertical-align: 0.003em; width: 0.003em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-14" style="font-family: MathJax_Math-italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.107em;"></span></span><span class="mo" id="MathJax-Span-15" style="font-family: MathJax_Main; padding-left: 0.263em;">=</span><span class="mi" id="MathJax-Span-16" style="font-family: MathJax_Math-italic; padding-left: 0.263em;">m</span><span class="mi" id="MathJax-Span-17" style="font-family: MathJax_Math-italic;">a</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span><span style="border-left-width: 0.003em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 2.503em; vertical-align: -1.622em;"></span></span></nobr></span></div><script type="math/tex; mode=display" id="MathJax-Element-1">Equation 1:\\ 
F = ma</script></p>
<p>This states that the sum of all forces acting upon some object is equal to that object's mass <code>m</code> multiplied by its acceleration <code>a</code>. <code>m</code> is in kilograms, <code>a</code> is in meters/second, and <code>F</code> is in Newtons.</p>
<p>Rearranging this equation a bit to solve for <code>a</code> yields:</p>
<p><span class="MathJax_Preview" style="color: inherit;"></span><div class="MathJax_Display"><span class="MathJax" id="MathJax-Element-2-Frame"><nobr><span class="math" id="MathJax-Span-18" role="math" style="width: 100%; display: inline-block; min-width: 6.201em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(6.982em 1000em 14.117em -999.997em); top: -7.81em; left: 0.003em; width: 100%;"><span class="mrow" id="MathJax-Span-19"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.18em 1000em 4.378em -999.997em); top: -4.008em; left: 50%; margin-left: -2.602em;"><span class="mi" id="MathJax-Span-20" style="font-family: MathJax_Math-italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-21" style="font-family: MathJax_Math-italic;">q<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-22" style="font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-23" style="font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-24" style="font-family: MathJax_Math-italic;">t</span><span class="mi" id="MathJax-Span-25" style="font-family: MathJax_Math-italic;">i</span><span class="mi" id="MathJax-Span-26" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-27" style="font-family: MathJax_Math-italic;">n</span><span class="mn" id="MathJax-Span-28" style="font-family: MathJax_Main;">2</span><span class="mo" id="MathJax-Span-29" style="font-family: MathJax_Main; padding-left: 0.263em;">:</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(2.503em 1000em 4.846em -999.997em); top: -2.029em; left: 50%; margin-left: -1.508em;"><span class="mspace" id="MathJax-Span-30" style="height: 0.003em; vertical-align: 0.003em; width: 0.003em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-31" style="font-family: MathJax_Math-italic;">a</span><span class="mo" id="MathJax-Span-32" style="font-family: MathJax_Main; padding-left: 0.263em;">=</span><span class="mfrac" id="MathJax-Span-33" style="padding-left: 0.263em;"><span style="display: inline-block; position: relative; width: 0.992em; height: 0px; margin-right: 0.107em; margin-left: 0.107em;"><span style="position: absolute; clip: rect(3.18em 1000em 4.169em -999.997em); top: -4.685em; left: 50%; margin-left: -0.362em;"><span class="mi" id="MathJax-Span-34" style="font-family: MathJax_Math-italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.107em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.44em 1000em 4.169em -999.997em); top: -3.331em; left: 50%; margin-left: -0.414em;"><span class="mi" id="MathJax-Span-35" style="font-family: MathJax_Math-italic;">m</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(0.836em 1000em 1.201em -999.997em); top: -1.247em; left: 0.003em;"><span style="border-left-width: 0.992em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.388em 1000em 4.273em -999.997em); top: -0.414em; left: 50%; margin-left: -0.31em;"><span class="mspace" id="MathJax-Span-36" style="height: 0.003em; vertical-align: 0.003em; width: 0.003em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-37" style="font-family: MathJax_AMS;">∴</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(2.503em 1000em 4.846em -999.997em); top: 1.409em; left: 50%; margin-left: -2.393em;"><span class="mspace" id="MathJax-Span-38" style="height: 0.003em; vertical-align: 0.003em; width: 0.003em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-39" style="font-family: MathJax_Math-italic;">a</span><span class="mo" id="MathJax-Span-40" style="font-family: MathJax_Main; padding-left: 0.263em;">=</span><span class="mi" id="MathJax-Span-41" style="font-family: MathJax_Math-italic; padding-left: 0.263em;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.107em;"></span></span><span class="mo" id="MathJax-Span-42" style="font-family: MathJax_Main; padding-left: 0.211em;">∗</span><span class="mfrac" id="MathJax-Span-43" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.992em; height: 0px; margin-right: 0.107em; margin-left: 0.107em;"><span style="position: absolute; clip: rect(3.18em 1000em 4.169em -999.997em); top: -4.685em; left: 50%; margin-left: -0.258em;"><span class="mn" id="MathJax-Span-44" style="font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.44em 1000em 4.169em -999.997em); top: -3.331em; left: 50%; margin-left: -0.414em;"><span class="mi" id="MathJax-Span-45" style="font-family: MathJax_Math-italic;">m</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(0.836em 1000em 1.201em -999.997em); top: -1.247em; left: 0.003em;"><span style="border-left-width: 0.992em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 7.815em;"></span></span></span><span style="border-left-width: 0.003em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 8.316em; vertical-align: -7.434em;"></span></span></nobr></span></div><script type="math/tex; mode=display" id="MathJax-Element-2">Equation 2:\\ 
a = \frac{F}{m}\\ 
\therefore\\ 
a = F * \frac{1}{m}</script></p>
<p>The next step involves using acceleration to step an object from one location to another. Since a game is displayed in discrete separate frames in an illusion-like animation, the locations of each position at these discrete steps has to be calculated. For a more in-depth cover of these equations please see: <a href="https://code.google.com/p/box2d/downloads/detail?name=GDC2009_ErinCatto.zip&can=2&q=">Erin Catto's Integration Demo from GDC 2009</a> and <a href="http://www.niksula.hut.fi/~hkankaan/Homepages/gravity.html">Hannu's addition to symplectic Euler for more stability in low FPS environments</a>.</p>
<p>Explicit Euler (pronounced "oiler") integration is shown in the following snippet, where <code>x</code> is position and <code>v</code> is velocity. Please note that <code>1/m * F</code> is acceleration, as explained above:</p>
<div><div id="highlighter_811298" class="syntaxhighlighter noskimlinks noskimwords cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp comments">// Explicit Euler</code></div><div class="line number2 index1 alt1"><code class="cpp plain">x += v * dt</code></div><div class="line number3 index2 alt2"><code class="cpp plain">v += (1/m * F) * dt</code></div></div></td></tr></tbody></table></div></div>
<div class="tip-shortcode">
<code>dt</code> here refers to delta time. Δ is the symbol for delta, and can be read literally as "change in", or written as Δ<code>t</code>. So whenever you see <code>dt</code> it can be read as "change in time". <code>dv</code> would be "change in velocity".</div>
<p>This will work, and is commonly used as a starting point. However, it has numerical inaccuracies that we can get rid of without any extra effort. Here is what is known as Symplectic Euler:</p>
<div><div id="highlighter_660148" class="syntaxhighlighter noskimlinks noskimwords cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp comments">// Symplectic Euler</code></div><div class="line number2 index1 alt1"><code class="cpp plain">v += (1/m * F) * dt</code></div><div class="line number3 index2 alt2"><code class="cpp plain">x += v * dt</code></div></div></td></tr></tbody></table></div></div>
<p>Note that all I did was rearrange the order of the two lines of code - see <a href="http://gamedevelopment.tutsplus.com/tutorials/%3Ca%20href=" http:="">"&gt;the aforementioned article from Hannu</a>.</p>
<p>This post explains the numerical inaccuracies of Explicit Euler, but be warned that he starts covering RK4, which I don't personally recommend: <a href="http://gafferongames.com/game-physics/integration-basics/">gafferongames.com: Euler Inaccuracy</a>.</p>
<p>These simple equations are all that we need to move all objects around with linear velocity and acceleration.</p>
<hr>
<h2 class="nolinks"><a name="timestepping">Timestepping</a></h2>
<p>Since games are displayed at discrete time intervals, there needs to be a way of manipulating the time between these steps in a controlled manner. Have you ever seen a game that will run at different speeds depending on what computer it is being played on? That's an example of a game running at a speed dependent on the computer's ability to run the game.</p>
<p>We need a way to ensure that our physics engine only runs when a specific amount of time has passed. This way, the <code>dt</code> that is used within calculations is always the exact same number. Using the exact same <code>dt</code> value in your code everywhere will actually make your physics engine <em>deterministic</em>, and is known as a <em>fixed timestep</em>. This is a good thing.</p>
<p>A deterministic physics engine is one that will always do the exact same thing every time it is run assuming the same inputs are given. This is essential for many types of games where gameplay needs to be very fine-tuned to the physics engine's behavior. This is also essential for debugging your physics engine, as in order to pinpoint bugs the behavior of your engine needs to be consistent.</p>
<p>Let's first cover a simple version of a fixed timestep. Here is an example:</p>
<div><div id="highlighter_565262" class="syntaxhighlighter noskimlinks noskimwords cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">const</code> <code class="cpp color1 bold">float</code> <code class="cpp plain">fps = 100</code></div><div class="line number2 index1 alt1"><code class="cpp keyword bold">const</code> <code class="cpp color1 bold">float</code> <code class="cpp plain">dt = 1 / fps</code></div><div class="line number3 index2 alt2"><code class="cpp color1 bold">float</code> <code class="cpp plain">accumulator = 0</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="cpp comments">// In units of seconds</code></div><div class="line number6 index5 alt1"><code class="cpp color1 bold">float</code> <code class="cpp plain">frameStart = GetCurrentTime( )</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="cpp comments">// main loop</code></div><div class="line number9 index8 alt2"><code class="cpp keyword bold">while</code><code class="cpp plain">(</code><code class="cpp keyword bold">true</code><code class="cpp plain">)</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">const</code> <code class="cpp color1 bold">float</code> <code class="cpp plain">currentTime = GetCurrentTime( )</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Store the time elapsed since the last frame began</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">accumulator += currentTime - frameStart( )</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Record the starting of this frame</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">frameStart = currentTime</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(accumulator &gt; dt)</code></div><div class="line number19 index18 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">UpdatePhysics( dt )</code></div><div class="line number20 index19 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">accumulator -= dt</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">RenderGame( )</code></div></div></td></tr></tbody></table></div></div>
<p>This waits around, rendering the game, until enough time has elapsed to update the physics. The elapsed time is recorded, and discrete <code>dt</code>-sized chunks of time are taken from the accumulator and processed by the physics. This ensures that the exact same value is passed to the physics no matter what, and that the value passed to the physics is an accurate representation of actual time that passes by in real life. Chunks of <code>dt</code> are removed from the <code>accumulator</code> until the <code>accumulator</code> is smaller than a <code>dt</code> chunk.</p>
<p>There are a couple of problems that can be fixed here. The first involves how long it takes to actually perform the physics update: What if the physics update takes too long and the <code>accumulator</code> goes higher and higher each game loop? This is called the spiral of death. If this is not fixed, your engine will quickly grind to a complete halt if your physics cannot be performed fast enough.</p>
<p>To solve this, the engine really needs to just run fewer physics updates if the <code>accumulator</code> gets too high. A simple way to do this would be to clamp the <code>accumulator</code> below some arbitrary value.</p>
<div><div id="highlighter_852600" class="syntaxhighlighter noskimlinks noskimwords cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">const</code> <code class="cpp color1 bold">float</code> <code class="cpp plain">fps = 100</code></div><div class="line number2 index1 alt1"><code class="cpp keyword bold">const</code> <code class="cpp color1 bold">float</code> <code class="cpp plain">dt = 1 / fps</code></div><div class="line number3 index2 alt2"><code class="cpp color1 bold">float</code> <code class="cpp plain">accumulator = 0</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="cpp comments">// In units seconds</code></div><div class="line number6 index5 alt1"><code class="cpp color1 bold">float</code> <code class="cpp plain">frameStart = GetCurrentTime( )</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="cpp comments">// main loop</code></div><div class="line number9 index8 alt2"><code class="cpp keyword bold">while</code><code class="cpp plain">(</code><code class="cpp keyword bold">true</code><code class="cpp plain">)</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">const</code> <code class="cpp color1 bold">float</code> <code class="cpp plain">currentTime = GetCurrentTime( )</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Store the time elapsed since the last frame began</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">accumulator += currentTime - frameStart( )</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Record the starting of this frame</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">frameStart = currentTime</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Avoid spiral of death and clamp dt, thus clamping</code></div><div class="line number19 index18 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// how many times the UpdatePhysics can be called in</code></div><div class="line number20 index19 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// a single game loop.</code></div><div class="line number21 index20 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(accumulator &gt; 0.2f)</code></div><div class="line number22 index21 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">accumulator = 0.2f</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(accumulator &gt; dt)</code></div><div class="line number25 index24 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">UpdatePhysics( dt )</code></div><div class="line number26 index25 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">accumulator -= dt</code></div><div class="line number27 index26 alt2">&nbsp;</div><div class="line number28 index27 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">RenderGame( )</code></div></div></td></tr></tbody></table></div></div>
<p>Now, if a game running this loop ever encounters some sort of stalling for whatever reason, the physics will not drown itself in a spiral of death. The game will simply run a little more slowly, as appropriate.</p>
<p>The next thing to fix is quite minor in comparison to the spiral of death. This loop is taking <code>dt</code> chunks from the <code>accumulator</code> until the <code>accumulator</code> is smaller than <code>dt</code>. This is fun, but there's still a little bit of remaining time left in the <code>accumulator</code>. This poses a problem.</p>
<p>Assume the <code>accumulator</code> is left with 1/5th of a <code>dt</code> chunk every frame. On the sixth frame the <code>accumulator</code> will have enough remaining time to perform one more physics update than all the other frames. This will result in one frame every second or so performing a slightly larger discrete jump in time, and might be very noticeable in your game.</p>
<p>To solve this, the use of <em>linear interpolation</em> is required. If this sounds scary, don't worry - the implementation will be shown. If you want to understand the implementation there are many resources online for linear interpolation.</p>
<div><div id="highlighter_535266" class="syntaxhighlighter noskimlinks noskimwords cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp comments">// linear interpolation for a from 0 to 1</code></div><div class="line number2 index1 alt1"><code class="cpp comments">// from t1 to t2</code></div><div class="line number3 index2 alt2"><code class="cpp plain">t1 * a + t2(1.0f - a)</code></div></div></td></tr></tbody></table></div></div>
<p>Using this we can interpolate (approximate) where we might be between two different time intervals. This can be used to render the state of a game in between two different physics updates.</p>
<p>With linear interpolation, the rendering of an engine can run at a different pace than the physics engine. This allows a graceful handling of the leftover <code>accumulator</code> from the physics updates.</p>
<p>Here is a full example:</p>
<div><div id="highlighter_27559" class="syntaxhighlighter noskimlinks noskimwords cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">const</code> <code class="cpp color1 bold">float</code> <code class="cpp plain">fps = 100</code></div><div class="line number2 index1 alt1"><code class="cpp keyword bold">const</code> <code class="cpp color1 bold">float</code> <code class="cpp plain">dt = 1 / fps</code></div><div class="line number3 index2 alt2"><code class="cpp color1 bold">float</code> <code class="cpp plain">accumulator = 0</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="cpp comments">// In units seconds</code></div><div class="line number6 index5 alt1"><code class="cpp color1 bold">float</code> <code class="cpp plain">frameStart = GetCurrentTime( )</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="cpp comments">// main loop</code></div><div class="line number9 index8 alt2"><code class="cpp keyword bold">while</code><code class="cpp plain">(</code><code class="cpp keyword bold">true</code><code class="cpp plain">)</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">const</code> <code class="cpp color1 bold">float</code> <code class="cpp plain">currentTime = GetCurrentTime( )</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Store the time elapsed since the last frame began</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">accumulator += currentTime - frameStart( )</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Record the starting of this frame</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">frameStart = currentTime</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Avoid spiral of death and clamp dt, thus clamping</code></div><div class="line number19 index18 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// how many times the UpdatePhysics can be called in</code></div><div class="line number20 index19 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// a single game loop.</code></div><div class="line number21 index20 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(accumulator &gt; 0.2f)</code></div><div class="line number22 index21 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">accumulator = 0.2f</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(accumulator &gt; dt)</code></div><div class="line number25 index24 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">UpdatePhysics( dt )</code></div><div class="line number26 index25 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">accumulator -= dt</code></div><div class="line number27 index26 alt2">&nbsp;</div><div class="line number28 index27 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">const</code> <code class="cpp color1 bold">float</code> <code class="cpp plain">alpha = accumulator / dt;</code></div><div class="line number29 index28 alt2">&nbsp;</div><div class="line number30 index29 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">RenderGame( alpha )</code></div><div class="line number31 index30 alt2">&nbsp;</div><div class="line number32 index31 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">RenderGame( </code><code class="cpp color1 bold">float</code> <code class="cpp plain">alpha )</code></div><div class="line number33 index32 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code> <code class="cpp plain">shape in game </code><code class="cpp keyword bold">do</code></div><div class="line number34 index33 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// calculate an interpolated transform for rendering</code></div><div class="line number35 index34 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Transform i = shape.previous * alpha + shape.current * (1.0f - alpha)</code></div><div class="line number36 index35 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">shape.previous = shape.current</code></div><div class="line number37 index36 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">shape.Render( i )</code></div></div></td></tr></tbody></table></div></div>
<p>Here, all objects within the game can be drawn at variable moments between discrete physics timesteps. This will gracefully handle all error and remainder time accumulation. This is actually rendering ever so slightly behind what the physics has currently solved for, but when watching the game run all motion is smoothed out perfectly by the interpolation.</p>
<p>The player will never know that the rendering is ever so slightly behind the physics, because the player will only know what they see, and what they'll see is perfectly smooth transitions from one frame to another.</p>
<p>You may be wondering, "why don't we interpolate from the current position to the next?". I tried this and it requires the rendering to "guess" where objects are going to be in the future. Often, objects in a physics engine make sudden changes in movement, such as during collision, and when such a sudden movement change is made, objects will teleport around due to inaccurate interpolations into the future.</p>
<hr>
<h2 class="nolinks"><a name="modulardesign">Modular Design</a></h2>
<p>There are a few things every physics object is going to need. However, the specific things each physics object needs may change slightly from object to object. A clever way to organize all this data is required, and it would be assumed that the lesser amount of code to write to achieve such organization is desired. In this case some modular design would be of good use.</p>
<p>Modular design probably sounds a little pretentious or over-complicated, but it does make sense and is quite simple. In this context, "modular design" just means we want to break a physics object into separate pieces, so that we can connect or disconnect them however we see fit.</p>
<h3 class="nolinks">Bodies</h3>
<p>A physics body is an object that contains all information about some given physics object. It will store the shape(s) that the object is represented by, mass data, transformation (position, rotation), velocity, torque, and so on. Here is what our <code>body</code> ought to look like:</p>
<div><div id="highlighter_6714" class="syntaxhighlighter noskimlinks noskimwords cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">struct</code> <code class="cpp plain">body</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">Shape *shape;</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">Transform tx;</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">Material material;</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">MassData mass_data;</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">Vec2 velocity;</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">Vec2 force;</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">real gravityScale;</code></div><div class="line number10 index9 alt1"><code class="cpp plain">};</code></div></div></td></tr></tbody></table></div></div>
<p>This is a great starting point for the design of a physics body structure. There are some intelligent decisions made here that tend towards strong code organization.</p>
<p>The first thing to notice is that a shape is contained within the body by means of a pointer. This represents a loose relationship between the body and its shape. A body can contain any shape, and the shape of a body can be swapped around at will. In fact, a body can be represented by multiple shapes, and such a body would be known as a "composite", as it would be composed of multiple shapes. (I'm not going to cover composites in this tutorial.)</p>
<figure class="tutorial_image"><img class="aligncenter size-full wp-image-7526" alt="Body and Shape interface." src="./Seite2_files/custom-physics-shape-interface.png" data-original-url="http://cdn.tutsplus.com/gamedev.tutsplus.com/uploads/2013/04/custom-physics-shape-interface.png" width="600" height="400">
<figcaption>Body and Shape interface.</figcaption>
</figure>
<p>The <code>shape</code> itself is responsible for computing bounding shapes, calculating mass based on density, and rendering.</p>
<p>The <code>mass_data</code> is a small data structure to contain mass-related information:</p>
<div><div id="highlighter_783503" class="syntaxhighlighter noskimlinks noskimwords cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">struct</code> <code class="cpp plain">MassData</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">float</code> <code class="cpp plain">mass;</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">float</code> <code class="cpp plain">inv_mass;</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// For rotations (not covered in this article)</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">float</code> <code class="cpp plain">inertia;</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">float</code> <code class="cpp plain">inverse_inertia;</code></div><div class="line number9 index8 alt2"><code class="cpp plain">};</code></div></div></td></tr></tbody></table></div></div>
<p>It is nice to store all mass- and intertia-related values in a single structure. The mass should never be set by hand - mass should always be calculated by the shape itself. Mass is a rather unintuitive type of value, and setting it by hand will take a lot of tweaking time. It's defined as:</p>
<p><span class="MathJax_Preview" style="color: inherit;"></span><div class="MathJax_Display"><span class="MathJax" id="MathJax-Element-3-Frame"><nobr><span class="math" id="MathJax-Span-46" role="math" style="width: 100%; display: inline-block; min-width: 13.44em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(3.18em 1000em 5.68em -999.997em); top: -4.008em; left: 0.003em; width: 100%;"><span class="mrow" id="MathJax-Span-47"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.18em 1000em 4.378em -999.997em); top: -4.008em; left: 50%; margin-left: -2.602em;"><span class="mi" id="MathJax-Span-48" style="font-family: MathJax_Math-italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-49" style="font-family: MathJax_Math-italic;">q<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-50" style="font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-51" style="font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-52" style="font-family: MathJax_Math-italic;">t</span><span class="mi" id="MathJax-Span-53" style="font-family: MathJax_Math-italic;">i</span><span class="mi" id="MathJax-Span-54" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-55" style="font-family: MathJax_Math-italic;">n</span><span class="mn" id="MathJax-Span-56" style="font-family: MathJax_Main;">3</span><span class="mo" id="MathJax-Span-57" style="font-family: MathJax_Main; padding-left: 0.263em;">:</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.18em 1000em 4.378em -999.997em); top: -2.706em; left: 50%; margin-left: -5.57em;"><span class="mspace" id="MathJax-Span-58" style="height: 0.003em; vertical-align: 0.003em; width: 0.003em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-59" style="font-family: MathJax_Math-italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.107em;"></span></span><span class="mi" id="MathJax-Span-60" style="font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-61" style="font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-62" style="font-family: MathJax_Math-italic;">s</span><span class="mo" id="MathJax-Span-63" style="font-family: MathJax_Main; padding-left: 0.263em;">=</span><span class="mi" id="MathJax-Span-64" style="font-family: MathJax_Math-italic; padding-left: 0.263em;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-65" style="font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-66" style="font-family: MathJax_Math-italic;">n</span><span class="mi" id="MathJax-Span-67" style="font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-68" style="font-family: MathJax_Math-italic;">i</span><span class="mi" id="MathJax-Span-69" style="font-family: MathJax_Math-italic;">t</span><span class="mi" id="MathJax-Span-70" style="font-family: MathJax_Math-italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-71" style="font-family: MathJax_Main; padding-left: 0.211em;">∗</span><span class="mi" id="MathJax-Span-72" style="font-family: MathJax_Math-italic; padding-left: 0.211em;">v</span><span class="mi" id="MathJax-Span-73" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-74" style="font-family: MathJax_Math-italic;">l</span><span class="mi" id="MathJax-Span-75" style="font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-76" style="font-family: MathJax_Math-italic;">m</span><span class="mi" id="MathJax-Span-77" style="font-family: MathJax_Math-italic;">e</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span><span style="border-left-width: 0.003em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 2.753em; vertical-align: -1.872em;"></span></span></nobr></span></div><script type="math/tex; mode=display" id="MathJax-Element-3"> Equation 3:\\Mass = density * volume</script></p>
<p>Whenever a designer wants a shape to be more "massive" or "heavy", they should modify the density of a shape. This density can be used to calculate the mass of a shape given its volume. This is the proper way to go about the situation, as density is not affected by volume and will never change during the runtime of the game (unless specifically supported with special code).</p>
<p>Some examples of shapes such as AABBs and Circles can be found in <a href="http://gamedev.tutsplus.com/tutorials/implementation/create-custom-2d-physics-engine-aabb-circle-impulse-resolution/">the previous tutorial in this series</a>.</p>
<h3 class="nolinks">Materials</h3>
<p>All this talk of mass and density leads to the question: Where does the density value lay? It resides within the <code>Material</code> structure:</p>
<div><div id="highlighter_381379" class="syntaxhighlighter noskimlinks noskimwords cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">struct</code> <code class="cpp plain">Material</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">float</code> <code class="cpp plain">density;</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">float</code> <code class="cpp plain">restitution;</code></div><div class="line number5 index4 alt2"><code class="cpp plain">};</code></div></div></td></tr></tbody></table></div></div>
<p>Once the values of the material are set, this material can be passed to the shape of a body so that the body can calculate the mass.</p>
<p>The last thing worthy of mention is the <code>gravity_scale</code>. Scaling gravity for different objects is so often required for tweaking gameplay that it is best to just include a value in each body specifically for this task.</p>
<p>Some useful material settings for common material types can be used to construct a <code>Material</code> object from an enumeration value:</p>
<div><div id="highlighter_464022" class="syntaxhighlighter noskimlinks noskimwords cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp plain">Rock&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Density : 0.6&nbsp; Restitution : 0.1</code></div><div class="line number2 index1 alt1"><code class="cpp plain">Wood&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Density : 0.3&nbsp; Restitution : 0.2</code></div><div class="line number3 index2 alt2"><code class="cpp plain">Metal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Density : 1.2&nbsp; Restitution : 0.05</code></div><div class="line number4 index3 alt1"><code class="cpp plain">BouncyBall Density : 0.3&nbsp; Restitution : 0.8</code></div><div class="line number5 index4 alt2"><code class="cpp plain">SuperBall&nbsp; Density : 0.3&nbsp; Restitution : 0.95</code></div><div class="line number6 index5 alt1"><code class="cpp plain">Pillow&nbsp;&nbsp;&nbsp;&nbsp; Density : 0.1&nbsp; Restitution : 0.2</code></div><div class="line number7 index6 alt2"><code class="cpp plain">Static&nbsp;&nbsp;&nbsp;&nbsp; Density : 0.0&nbsp; Restitution : 0.4</code></div></div></td></tr></tbody></table></div></div>
<h3 class="nolinks">Forces</h3>
<p>There is one more thing to talk about in the <code>body</code> structure. There is a data member called <code>force</code>. This value starts at zero at the beginning of each physics update. Other influences in the physics engine (such as gravity) will add <code>Vec2</code> vectors into this <code>force</code> data member. Just before integration all of this force will be used to calculate acceleration of the body, and be used during integration. After integration this <code>force</code> data member is zeroed out.</p>
<p>This allows for any number of forces to act upon an object whenever they see fit, and no extra code will be required to be written when new types of forces are to be applied to objects.</p>
<p>Lets take an example. Say we have a small circle representing a very heavy object. This small circle is flying around in the game, and it is so heavy that it pulls other objects towards it ever so slightly. Here is some rough pseudocode to demonstrate this:</p>
<div><div id="highlighter_381472" class="syntaxhighlighter noskimlinks noskimwords cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp plain">HeavyObject object</code></div><div class="line number2 index1 alt1"><code class="cpp keyword bold">for</code> <code class="cpp plain">body in game </code><code class="cpp keyword bold">do</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(object.CloseEnoughTo( body )</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">object.ApplyForcePullOn( body )</code></div></div></td></tr></tbody></table></div></div>
<p>The function <code>ApplyForcePullOn()</code> could perhaps apply a small force to pull the <code>body</code> towards the <code>HeavyObject</code>, only if the <code>body</code> is close enough.</p>
<figure class="tutorial_image"><img class="aligncenter size-full wp-image-7528" alt="Two objects pulled towards a larger one. The pull force is dependent upon distance." src="./Seite2_files/custom-physics-pull-force.png" data-original-url="http://cdn.tutsplus.com/gamedev.tutsplus.com/uploads/2013/04/custom-physics-pull-force.png" width="600" height="400"><br>
<figcaption>Two objects pulled towards a larger one moving pasted them. The pull forces are dependent upon their distance to the larger box.</figcaption>
</figure>
<p>It doesn't matter how many forces are added to the <code>force</code> of a body, as they will all add up  to a single summed force vector for that body. This means that two forces acting upon the same body can potentially cancel each other out.</p>
<hr>
<h2 class="nolinks"><a name="broadphase">Broad Phase</a></h2>
<p>In the previous article in this series collision detection routines were introduced. These routines were actually apart of what is known as the "narrow phase". The differences between broad phase and narrow phase can be researched rather easily with a Google search.</p>
<p>(In brief: we use broad phase collision detection to figure out which pairs of objects <em>might</em> be colliding, and then narrow phase collision detection to check whether they actually <em>are</em> colliding.)</p>
<p>I would like to provide some example code along with an explanation of how to implement a broad phase of  <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-4-Frame"><nobr><span class="math" id="MathJax-Span-78" role="math" style="width: 3.128em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.607em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.721em 1000em 3.128em -999.997em); top: -2.706em; left: 0.003em;"><span class="mrow" id="MathJax-Span-79"><span class="mi" id="MathJax-Span-80" style="font-family: MathJax_Math-italic;">O</span><span class="mo" id="MathJax-Span-81" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-82"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px;"><span style="position: absolute; clip: rect(3.44em 1000em 4.169em -999.997em); top: -4.008em; left: 0.003em;"><span class="mi" id="MathJax-Span-83" style="font-family: MathJax_Math-italic;">n</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.372em; left: 0.628em;"><span class="mn" id="MathJax-Span-84" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-85" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.711em;"></span></span></span><span style="border-left-width: 0.003em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.441em; vertical-align: -0.372em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-4">O(n^2)</script> time-complexity pair calculations.</p>
<div class="tip-shortcode"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-5-Frame"><nobr><span class="math" id="MathJax-Span-86" role="math" style="width: 3.098em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.562em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.729em 1000em 3.158em -999.997em); top: -2.735em; left: 0.003em;"><span class="mrow" id="MathJax-Span-87"><span class="mi" id="MathJax-Span-88" style="font-family: MathJax_Math-italic;">O</span><span class="mo" id="MathJax-Span-89" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-90"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000em 4.17em -999.997em); top: -3.985em; left: 0.003em;"><span class="mi" id="MathJax-Span-91" style="font-family: MathJax_Math-italic;">n</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0.598em;"><span class="mn" id="MathJax-Span-92" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-93" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.741em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.432em; vertical-align: -0.354em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-5">O(n^2)</script> essentially means that the time taken to check every pair of potential collisions will depend on the square of the number of objects. It uses <a href="http://en.wikipedia.org/wiki/Time_complexity">Big-O notation</a>.</div>
<p>Since we're working with pairs of objects, it will be useful to create a structure like so:</p>
<div><div id="highlighter_26836" class="syntaxhighlighter noskimlinks noskimwords cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">struct</code> <code class="cpp plain">Pair</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">body *A;</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">body *B;</code></div><div class="line number5 index4 alt2"><code class="cpp plain">};</code></div></div></td></tr></tbody></table></div></div>
<p>A broad phase should collect a bunch of possible collisions and store them all in <code>Pair</code> structures. These pairs can then be passed on to another portion of the engine (the narrow phase), and then resolved.</p>
<p>Example broad phase:</p>
<div><div id="highlighter_758829" class="syntaxhighlighter noskimlinks noskimwords cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp comments">// Generates the pair list.</code></div><div class="line number2 index1 alt1"><code class="cpp comments">// All previous pairs are cleared when this function is called.</code></div><div class="line number3 index2 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">BroadPhase::GeneratePairs( </code><code class="cpp keyword bold">void</code> <code class="cpp plain">)</code></div><div class="line number4 index3 alt1"><code class="cpp plain">{</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">pairs.clear( )</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Cache space for AABBs to be used in computation</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// of each shape's bounding box</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">AABB A_aabb</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">AABB B_aabb</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i = bodies.begin( ); i != bodies.end( ); i = i-&gt;next)</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number14 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(j = bodies.begin( ); j != bodies.end( ); j = j-&gt;next)</code></div><div class="line number15 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Body *A = &amp;i-&gt;GetData( )</code></div><div class="line number17 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Body *B = &amp;j-&gt;GetData( )</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Skip check with self</code></div><div class="line number20 index19 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(A == B)</code></div><div class="line number21 index20 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">continue</code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">A-&gt;ComputeAABB( &amp;A_aabb )</code></div><div class="line number24 index23 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">B-&gt;ComputeAABB( &amp;B_aabb )</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(AABBtoAABB( A_aabb, B_aabb ))</code></div><div class="line number27 index26 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">pairs.push_back( A, B )</code></div><div class="line number28 index27 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number29 index28 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number30 index29 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>The above code is quite simple: Check each body against each body, and skip self-checks.</p>
<h3 class="nolinks">Culling Duplicates</h3>
<p>There is one problem from the last section: many duplicate pairs will be returned! These duplicates need to be culled from the results. Some familiarity with sorting algorithms will be required here if you do not have some sort of sorting library available. If you're using C++ then you're in luck:</p>
<div><div id="highlighter_524410" class="syntaxhighlighter noskimlinks noskimwords cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp comments">// Sort pairs to expose duplicates</code></div><div class="line number2 index1 alt1"><code class="cpp plain">sort( pairs, pairs.end( ), SortPairs );</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="cpp comments">// Queue manifolds for solving</code></div><div class="line number5 index4 alt2"><code class="cpp plain">{</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">int</code> <code class="cpp plain">i = 0;</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(i &lt; pairs.size( ))</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Pair *pair = pairs.begin( ) + i;</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">uniquePairs.push_front( pair );</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">++i;</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Skip duplicate pairs by iterating i until we find a unique pair</code></div><div class="line number15 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(i &lt; pairs.size( ))</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number17 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Pair *potential_dup = pairs + i;</code></div><div class="line number18 index17 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(pair-&gt;A != potential_dup-&gt;B || pair-&gt;B != potential_dup-&gt;A)</code></div><div class="line number19 index18 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number20 index19 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">++i;</code></div><div class="line number21 index20 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number22 index21 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number23 index22 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>After sorting all the pairs in a specific order it can be assumed that all pairs in the <code>pairs</code> container will have all duplicates adjacent to one another. Place all unique pairs into a new container called <code>uniquePairs</code>, and the job of culling duplicates is finished.</p>
<p>The last thing to mention is the predicate <code>SortPairs()</code>. This <code>SortPairs()</code> function is what's actually used to do the sorting, and it might look like this:</p>
<div><div id="highlighter_119191" class="syntaxhighlighter noskimlinks noskimwords cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp color1 bold">bool</code> <code class="cpp plain">SortPairs( Pair lhs, Pair rhs )</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(lhs.A &lt; rhs.A)</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">true</code><code class="cpp plain">;</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(lhs.A == rhs.A)</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">lhs.B &lt; rhs.B;</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">false</code><code class="cpp plain">;</code></div><div class="line number10 index9 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<div class="tip-shortcode">The terms <code>lhs</code> and <code>rhs</code> can be read as "left hand side" and "right hand side". These terms are commonly used to refer to parameters of functions where things can logically be viewed as the left and right side of some equation or algorithm.</div>
<h3 class="nolinks">Layering</h3>
<p><em>Layering</em> refers to the act of having different objects never collide with one another. This is key for having bullets fired from certain objects not affect certain other objects. For example, players on one team might want their rockets to harm the enemies but not each other.</p>
<figure class="tutorial_image"><img class="aligncenter size-full wp-image-7531" alt="Representation of layering; some object collide with one another, some do not." src="./Seite2_files/custom-physics-layering.png" data-original-url="http://cdn.tutsplus.com/gamedev.tutsplus.com/uploads/2013/04/custom-physics-layering.png" width="600" height="400"><br>
<figcaption>Representation of layering; some object collide with one another, some do not.</figcaption>
</figure>
<p>Layering is best implemented with <em>bitmasks</em> - see <a href="http://stu.mp/2004/06/a-quick-bitmask-howto-for-programmers.html">A Quick Bitmask How-To for Programmers</a> and <a href="http://en.wikipedia.org/wiki/Mask_%28computing%29">the Wikipedia page</a> for a quick introduction, and the Filtering section of <a href="http://www.box2d.org/manual.html">the Box2D manual</a> to see how that engine uses bitmasks.</p>
<p>Layering should be done within the broad phase. Here I'll just paste a finished broad phase example:</p>
<div><div id="highlighter_75095" class="syntaxhighlighter noskimlinks noskimwords cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp comments">// Generates the pair list.</code></div><div class="line number2 index1 alt1"><code class="cpp comments">// All previous pairs are cleared when this function is called.</code></div><div class="line number3 index2 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">BroadPhase::GeneratePairs( </code><code class="cpp keyword bold">void</code> <code class="cpp plain">)</code></div><div class="line number4 index3 alt1"><code class="cpp plain">{</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">pairs.clear( )</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Cache space for AABBs to be used in computation</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// of each shape's bounding box</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">AABB A_aabb</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">AABB B_aabb</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i = bodies.begin( ); i != bodies.end( ); i = i-&gt;next)</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number14 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(j = bodies.begin( ); j != bodies.end( ); j = j-&gt;next)</code></div><div class="line number15 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Body *A = &amp;i-&gt;GetData( )</code></div><div class="line number17 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Body *B = &amp;j-&gt;GetData( )</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Skip check with self</code></div><div class="line number20 index19 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(A == B)</code></div><div class="line number21 index20 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">continue</code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Only matching layers will be considered</code></div><div class="line number24 index23 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(!(A-&gt;layers &amp; B-&gt;layers))</code></div><div class="line number25 index24 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">continue</code><code class="cpp plain">;</code></div><div class="line number26 index25 alt1">&nbsp;</div><div class="line number27 index26 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">A-&gt;ComputeAABB( &amp;A_aabb )</code></div><div class="line number28 index27 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">B-&gt;ComputeAABB( &amp;B_aabb )</code></div><div class="line number29 index28 alt2">&nbsp;</div><div class="line number30 index29 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(AABBtoAABB( A_aabb, B_aabb ))</code></div><div class="line number31 index30 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">pairs.push_back( A, B )</code></div><div class="line number32 index31 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number33 index32 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number34 index33 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>Layering turns out to be both highly efficient and very simple.</p>
<hr>
<div class="post__inarticle-ad-template" style="display: block; margin-top: 30px;"><div class="ad view ad--inarticle"><div class="ad__wrapper"><div class="ad__content" id="div-gpt-1392179545408-0"><div id="google_ads_iframe_/11757429/hub_gamedev_inarticle_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/11757429/hub_gamedev_inarticle_0" name="google_ads_iframe_/11757429/hub_gamedev_inarticle_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" src="javascript:"<html><body style='background:transparent'></body></html>"" style="border: 0px; vertical-align: bottom;"></iframe></div><iframe id="google_ads_iframe_/11757429/hub_gamedev_inarticle_0__hidden__" name="google_ads_iframe_/11757429/hub_gamedev_inarticle_0__hidden__" width="0" height="0" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" src="javascript:"<html><body style='background:transparent'></body></html>"" style="border: 0px; vertical-align: bottom; visibility: hidden; display: none;"></iframe></div><div class="ad__label">Advertisement</div></div></div></div><h2 class="nolinks"><a name="halfspace">Halfspace Intersection</a></h2>
<p>A <em>halfspace</em> can be viewed as one side of a line in 2D. Detecting whether a point is on one side of a line or the other is a pretty common task, and should be understood thoroughly by anyone creating their own physics engine. It is too bad that this topic isn't really covered anywhere on the internet in a meaningful way, at least from what I've seen - until now, of course!</p>
<p>The general equation of a line in 2D is:</p>
<p><span class="MathJax_Preview" style="color: inherit;"></span><div class="MathJax_Display"><span class="MathJax" id="MathJax-Element-6-Frame"><nobr><span class="math" id="MathJax-Span-94" role="math" style="width: 100%; display: inline-block; min-width: 16.409em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(5.211em 1000em 10.576em -999.997em); top: -6.039em; left: 0.003em; width: 100%;"><span class="mrow" id="MathJax-Span-95"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.18em 1000em 4.378em -999.997em); top: -4.008em; left: 50%; margin-left: -2.602em;"><span class="mi" id="MathJax-Span-96" style="font-family: MathJax_Math-italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-97" style="font-family: MathJax_Math-italic;">q<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-98" style="font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-99" style="font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-100" style="font-family: MathJax_Math-italic;">t</span><span class="mi" id="MathJax-Span-101" style="font-family: MathJax_Math-italic;">i</span><span class="mi" id="MathJax-Span-102" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-103" style="font-family: MathJax_Math-italic;">n</span><span class="mn" id="MathJax-Span-104" style="font-family: MathJax_Main;">4</span><span class="mo" id="MathJax-Span-105" style="font-family: MathJax_Main; padding-left: 0.263em;">:</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.128em 1000em 4.378em -999.997em); top: -2.654em; left: 50%; margin-left: -6.82em;"><span class="mspace" id="MathJax-Span-106" style="height: 0.003em; vertical-align: 0.003em; width: 0.003em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-107" style="font-family: MathJax_Math-italic;">G</span><span class="mi" id="MathJax-Span-108" style="font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-109" style="font-family: MathJax_Math-italic;">n</span><span class="mi" id="MathJax-Span-110" style="font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-111" style="font-family: MathJax_Math-italic;">r</span><span class="mi" id="MathJax-Span-112" style="font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-113" style="font-family: MathJax_Math-italic;">l</span><span class="mspace" id="MathJax-Span-114" style="height: 0.003em; vertical-align: 0.003em; width: 0.211em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-115" style="font-family: MathJax_Math-italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span class="mi" id="MathJax-Span-116" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-117" style="font-family: MathJax_Math-italic;">r</span><span class="mi" id="MathJax-Span-118" style="font-family: MathJax_Math-italic;">m</span><span class="mo" id="MathJax-Span-119" style="font-family: MathJax_Main; padding-left: 0.263em;">:</span><span class="mi" id="MathJax-Span-120" style="font-family: MathJax_Math-italic; padding-left: 0.263em;">a</span><span class="mi" id="MathJax-Span-121" style="font-family: MathJax_Math-italic;">x</span><span class="mo" id="MathJax-Span-122" style="font-family: MathJax_Main; padding-left: 0.211em;">+</span><span class="mi" id="MathJax-Span-123" style="font-family: MathJax_Math-italic; padding-left: 0.211em;">b</span><span class="mi" id="MathJax-Span-124" style="font-family: MathJax_Math-italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-125" style="font-family: MathJax_Main; padding-left: 0.211em;">+</span><span class="mi" id="MathJax-Span-126" style="font-family: MathJax_Math-italic; padding-left: 0.211em;">c</span><span class="mo" id="MathJax-Span-127" style="font-family: MathJax_Main; padding-left: 0.263em;">=</span><span class="mn" id="MathJax-Span-128" style="font-family: MathJax_Main; padding-left: 0.263em;">0</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(2.398em 1000em 5.107em -999.997em); top: -0.57em; left: 50%; margin-left: -4.633em;"><span class="mspace" id="MathJax-Span-129" style="height: 0.003em; vertical-align: 0.003em; width: 0.003em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-130" style="font-family: MathJax_Math-italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.107em;"></span></span><span class="mi" id="MathJax-Span-131" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-132" style="font-family: MathJax_Math-italic;">r</span><span class="mi" id="MathJax-Span-133" style="font-family: MathJax_Math-italic;">m</span><span class="mi" id="MathJax-Span-134" style="font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-135" style="font-family: MathJax_Math-italic;">l</span><span class="mspace" id="MathJax-Span-136" style="height: 0.003em; vertical-align: 0.003em; width: 0.211em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-137" style="font-family: MathJax_Math-italic;">t</span><span class="mi" id="MathJax-Span-138" style="font-family: MathJax_Math-italic;">o</span><span class="mspace" id="MathJax-Span-139" style="height: 0.003em; vertical-align: 0.003em; width: 0.211em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-140" style="font-family: MathJax_Math-italic;">l</span><span class="mi" id="MathJax-Span-141" style="font-family: MathJax_Math-italic;">i</span><span class="mi" id="MathJax-Span-142" style="font-family: MathJax_Math-italic;">n</span><span class="mi" id="MathJax-Span-143" style="font-family: MathJax_Math-italic;">e</span><span class="mo" id="MathJax-Span-144" style="font-family: MathJax_Main; padding-left: 0.263em;">:</span><span class="mrow" id="MathJax-Span-145" style="padding-left: 0.263em;"><span class="mo" id="MathJax-Span-146" style="vertical-align: 0.003em;"><span style="font-family: MathJax_Size3;">[</span></span><span class="mtable" id="MathJax-Span-147" style="padding-right: 0.159em; padding-left: 0.159em;"><span style="display: inline-block; position: relative; width: 0.523em; height: 0px;"><span style="position: absolute; clip: rect(2.763em 1000em 4.951em -999.997em); top: -4.008em; left: 0.003em;"><span style="display: inline-block; position: relative; width: 0.523em; height: 0px;"><span style="position: absolute; clip: rect(3.44em 1000em 4.169em -999.997em); top: -4.633em; left: 50%; margin-left: -0.258em;"><span class="mtd" id="MathJax-Span-148"><span class="mrow" id="MathJax-Span-149"><span class="mi" id="MathJax-Span-150" style="font-family: MathJax_Math-italic;">a</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.18em 1000em 4.169em -999.997em); top: -3.279em; left: 50%; margin-left: -0.206em;"><span class="mtd" id="MathJax-Span-151"><span class="mrow" id="MathJax-Span-152"><span class="mi" id="MathJax-Span-153" style="font-family: MathJax_Math-italic;">b</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-154" style="vertical-align: 0.003em;"><span style="font-family: MathJax_Size3;">]</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 6.044em;"></span></span></span><span style="border-left-width: 0.003em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 6.191em; vertical-align: -5.309em;"></span></span></nobr></span></div><script type="math/tex; mode=display" id="MathJax-Element-6">Equation 4:\\ 
General \: form: ax + by + c = 0\\ 
Normal \: to \: line: \begin{bmatrix} 
a \\ 
b \\ 
\end{bmatrix}</script></p>
<figure class="tutorial_image"><img class="aligncenter size-full wp-image-6470" alt="custom-physics-line2d" src="./Seite2_files/custom-physics-line2d.png" data-original-url="http://cdn.tutsplus.com/gamedev.tutsplus.com/authors/randy-gaul/custom-physics-line2d.png" width="600" height="400"></figure>
<p>Note that, despite its name, the normal vector is not necessarily normalized (that is, it doesn't necessarily have a length of 1).</p>
<p>To see whether a point is on a particular side of this line, all that we need to do is plug the point into the <code>x</code> and <code>y</code> variables in the equation and check the sign of the result. A result of 0 means the point is on the line, and positive/negative mean different sides of the line.</p>
<p>That is all there is to it! Knowing this the distance from a point to the line is actually the result from the previous test. If the normal vector is not normalized, then the result will be scaled by the magnitude of the normal vector.</p>
<hr>
<h2 class="nolinks">Conclusion</h2>
<p>By now a complete, albeit simple, physics engine can be constructed entirely from scratch. More advanced topics such as friction, orientation, and dynamic AABB tree may be covered in future tutorials. Please ask questions or provide comments below, I enjoy reading and answering them!</p>
</div></div></div></div><div class="layout__sidebar"><div class="ad view"><div class="ad__wrapper"><div class="ad__content" id="div-gpt-1385453370267-0"><div id="google_ads_iframe_/11757429/hub_gamedev_post_top_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/11757429/hub_gamedev_post_top_0" name="google_ads_iframe_/11757429/hub_gamedev_post_top_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" src="javascript:"<html><body style='background:transparent'></body></html>"" style="border: 0px; vertical-align: bottom;"></iframe></div></div><div class="ad__label">Advertisement</div></div></div><div class="post__sidebar"><div class="post__sidebar-primary"><div class="post__series-info"></div><div class="post-meta"><img sizes="100px" alt="Preview for How to Create a Custom 2D Physics Engine: The Core Engine" class="post-meta__image" srcset="https://cdn.tutsplus.com/gamedev/authors/randy-gaul/custom-physics-logo.png 400w" src="./Seite2_files/custom-physics-logo.png"><div class="post-meta__description"><div class="post-meta__item"><div class="post-meta__label">Difficulty:</div><div class="post-meta__value">Intermediate</div></div><div class="post-meta__item"><div class="post-meta__label">Length:</div><div class="post-meta__value">Medium</div></div><div class="post-meta__item"><div class="post-meta__label">Categories:</div><div class="post-meta__value"><span class="post-meta__tag"><a class="post-meta__category-link" href="http://gamedevelopment.tutsplus.com/categories/implementation">Implementation</a></span><span class="post-meta__tag"><a class="post-meta__category-link" href="http://gamedevelopment.tutsplus.com/categories/platform-agnostic">Platform Agnostic</a></span><span class="post-meta__tag"><a class="post-meta__category-link" href="http://gamedevelopment.tutsplus.com/categories/cpp">Cpp</a></span></div></div><div class="post-meta__label">Translations:</div><div class="post-meta__translate-this-post"><p>Tuts+ tutorials are translated into other languages by our community members—you can be involved too!</p><a class="post-meta__translate-button" href="https://getnative.me/?ref=tutsplus&lang=en&url=http://gamedevelopment.tutsplus.com/tutorials/how-to-create-a-custom-2d-physics-engine-the-core-engine--gamedev-7493&title=How%20to%20Create%20a%20Custom%202D%20Physics%20Engine%3A%20The%20Core%20Engine">Translate this post</a><span class="post-meta__translate-powered-by-native">Powered by<img class="post-meta__native-translate-image" title="Native" alt="Native logo" src="./Seite2_files/native-logo-658bb251c3d4aa0b1f50e8cdc1e3a003.png"></span></div></div></div><div class="instructor-bio view view--loaded"><div class="instructor-bio__title">About <a class="instructor-bio__title-link" href="http://tutsplus.com/authors/randy-gaul">Randy Gaul</a></div><div class="instructor-bio__details"><a class="instructor-bio__title-link" href="http://tutsplus.com/authors/randy-gaul"><img alt="" class="instructor-bio__image" src="./Seite2_files/ae0d645e5f5968bb8fa75615f86ea91a"></a>Hello! I am a Computer Science student studying at DigiPen IT. You can find more content by myself at <a href="http://randygaul.net/" rel="nofollow">RandyGaul.net</a>!</div><a class="instructor-bio__expand-link" href="javascript:;">+ Expand Bio</a><a class="instructor-bio__collapse-link" href="javascript:;" style="display: none;">- Collapse Bio</a></div><div class="post__ad"><div class="ad view"><div class="ad__wrapper"><div class="ad__content" id="div-gpt-1385453414394-0"><div id="google_ads_iframe_/11757429/hub_gamedev_post_mid_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/11757429/hub_gamedev_post_mid_0" name="google_ads_iframe_/11757429/hub_gamedev_post_mid_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" src="javascript:"<html><body style='background:transparent'></body></html>"" style="border: 0px; vertical-align: bottom;"></iframe></div></div><div class="ad__label">Advertisement</div></div></div></div></div><div class="post__sidebar-secondary"><div class="post__recommended-content"><div class="recommended-items"><div class="recommended-items__header">Related Tutorials</div><a href="http://music.tutsplus.com/articles/fl-studio-vs-ableton-live-battle-of-the-audio-engines--cms-23560?utm_source=Tuts+&utm_medium=website&utm_campaign=relatedtutorials&utm_content=sidebar&WT.mc_id=Tuts+_website_relatedtutorials_sidebar"><div class="recommended-items__item"><div class="recommended-items__preview-image-container"><img class="recommended-items__preview-image " src="./Seite2_files/prev-img.png" alt="Prev img"></div><div class="recommended-items__title">FL Studio vs. Ableton Live - Battle of the Audio Engines</div><div class="recommended-items__topic topic-music">Music &amp; Audio</div></div></a><a href="http://gamedevelopment.tutsplus.com/tutorials/projectile-physics-engines-building-a-game-world--cms-21811?utm_source=Tuts+&utm_medium=website&utm_campaign=relatedtutorials&utm_content=sidebar&WT.mc_id=Tuts+_website_relatedtutorials_sidebar"><div class="recommended-items__item"><div class="recommended-items__preview-image-container"><img class="recommended-items__preview-image " src="./Seite2_files/ProjectilePreview[1].png" alt="Projectilepreview[1]"></div><div class="recommended-items__title">Projectile Physics Engines: Building a Game World</div><div class="recommended-items__topic topic-gamedevelopment">Game Development</div></div></a><a href="http://gamedevelopment.tutsplus.com/articles/whats-in-a-projectile-physics-engine--cms-21584?utm_source=Tuts+&utm_medium=website&utm_campaign=relatedtutorials&utm_content=sidebar&WT.mc_id=Tuts+_website_relatedtutorials_sidebar"><div class="recommended-items__item"><div class="recommended-items__preview-image-container"><img class="recommended-items__preview-image " src="./Seite2_files/ProjectilePreview.png" alt="Projectilepreview"></div><div class="recommended-items__title">What's in a Projectile Physics Engine?</div><div class="recommended-items__topic topic-gamedevelopment">Game Development</div></div></a></div></div><div class="marketplace-items view view--loaded"><div class="marketplace-items__container">
  <div class="marketplace-items__header">Envato Market Item</div>
  <div class="marketplace-items__item">
  <a class="marketplace-items__item-link" href="http://codecanyon.net/item/link/10442946?ref=tutshub">
    <img src="./Seite2_files/linkMainPromo1590.png" alt="" class="marketplace-items__item-preview-image">
  </a>
</div>
</div></div><div class="post__call-for-subject"><div class="post__call-for-subject-title">What Would You Like to Learn?</div><div class="post__call-for-subject-body"><a href="https://tutsplus.uservoice.com/forums/248750-what-would-you-like-to-learn">Suggest an idea</a> to the content editorial team at Tuts+.</div></div></div></div></div><footer class="post__footer"><div class="layout__content-with-sidebar"><div class="post__comments" id="comments"><div id="disqus_thread" name="disqus_thread"><iframe id="dsq-app1" name="dsq-app1" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="./Seite2_files/saved_resource.html" style="width: 100% !important; border: none !important; overflow: hidden !important; height: 0px !important;"></iframe></div><script>var disqus_shortname  = "gamedevtuts";
var disqus_identifier = "7493 http://gamedev.tutsplus.com/?p=7493";
var disqus_title      = "How to Create a Custom 2D Physics Engine: The Core Engine";
var disqus_url        = "http://gamedevelopment.tutsplus.com/tutorials/how-to-create-a-custom-2d-physics-engine-the-core-engine--gamedev-7493";
var disqus_config     = function() {
    this.language = "en";
};

(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();

(function () {
  var s = document.createElement('script'); s.async = true;
  s.type = 'text/javascript';
  s.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());</script></div></div><div class="layout__sidebar"><div class="ad view"><div class="ad__wrapper"><div class="ad__content" id="div-gpt-1385453399887-0"><div id="google_ads_iframe_/11757429/hub_gamedev_post_comments_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/11757429/hub_gamedev_post_comments_0" name="google_ads_iframe_/11757429/hub_gamedev_post_comments_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" src="javascript:"<html><body style='background:transparent'></body></html>"" style="border: 0px; vertical-align: bottom;"></iframe></div></div><div class="ad__label">Advertisement</div></div></div></div></footer></article></main></div><footer class="page-footer"><div class="page-footer__content"><div class="page-footer__header"><div class="page-footer__tuts-brand"><img alt="envato-tuts+" class="page-footer__tuts-logo-image tuts-logo" src="./Seite2_files/tuts_logo-b4f5f5fad9a5f4b3f91e3b770689a808.svg"><span class="page-footer__tuts-brand-text">Teaching skills to millions worldwide.</span></div><div class="page-footer__counts"><div class="page-footer__count-item"><div class="page-footer__count-value">20,697</div><div class="page-footer__count-label">Tutorials</div><div class="page-footer__count-value">647</div><div class="page-footer__count-label">Video Courses</div></div></div></div><div class="page-footer__links-column"><div class="page-footer__section page-footer__section--first"><div class="page-footer__heading">Follow Us</div><a class="page-footer__social-link page-footer__facebook-link" href="https://www.facebook.com/tutsplus"><i class="fa fa-facebook"></i></a><a class="page-footer__social-link page-footer__twitter-link" href="https://twitter.com/tutsplus"><i class="fa fa-twitter"></i></a><a class="page-footer__social-link page-footer__googleplus-link" href="https://plus.google.com/108971748263060947124/posts"><i class="fa fa-google-plus"></i></a><a class="page-footer__social-link page-footer__pinterest-link" href="http://www.pinterest.com/tutsplus/"><i class="fa fa-pinterest"></i></a></div><div class="page-footer__section"><div class="page-footer__heading">Help and Support</div><div class="page-footer__support-item"><a class="page-footer__link" href="http://tutsplus.com/faq">FAQ</a></div><div class="page-footer__support-item"><a class="page-footer__link" href="http://tutsplus.com/terms-of-use">Terms of Use</a></div><div class="page-footer__support-item"><a class="page-footer__link" href="http://tutsplus.com/support">Contact Support</a></div><div class="page-footer__support-item"><a class="page-footer__link" href="http://tutsplus.com/about">About Tuts+</a></div><div class="page-footer__support-item"><a class="page-footer__link" href="http://tutsplus.com/advertise">Advertise</a></div><div class="page-footer__support-item"><a class="page-footer__link" href="http://tutsplus.com/teach">Teach at Tuts+</a></div><div class="page-footer__support-item"><a class="page-footer__link" href="http://tutsplus.com/translate-for-us">Translate for Tuts+</a></div><div class="page-footer__support-item"><a class="page-footer__link" href="http://community.envato.com/#/events/">Meetups</a></div></div></div><div class="page-footer__email-column"><div class="page-footer__section page-footer__section--first"><div class="page-footer__newsletter-section"><div class="page-footer__heading">Email Newsletters</div><div class="page-footer__newsletter-description">Get Tuts+ updates, news, surveys &amp; offers.</div><form class="page-footer__newsletter-form" action="http://gamedevelopment.tutsplus.com/weekly_digest_subscription_requests" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="✓"><input type="hidden" name="authenticity_token" value="7jqe+iN2epgB8D+2k0NueioseeIEI0YkCxmi8/ucbC8yaUC9Awjwk4poFKE+GxTHl6ET6tOdV0Q2GDMaAhfFLg=="><input placeholder="Email Address" class="page-footer__newsletter-email-field" type="email" name="weekly_digest_subscription_request[email]" id="weekly_digest_subscription_request_email"><button name="button" type="submit" class="page-footer__newsletter-submit">Subscribe</button></form><a class="page-footer__newsletter-privacy-policy-link page-footer__link" href="http://tutsplus.com/privacy-policy">Privacy Policy</a></div></div></div><div class="page-footer__right"><div class="page-footer__envato-product"><a href="http://studio.envato.com/?utm_source=tutsfooter&utm_medium=banner&utm_campaign=tutsfooter"><img alt="OPEN. New Services!" class="page-footer__envato-product-image page-footer__envato-product-image--studio" src="./Seite2_files/open-new-services-140x112-b60f3facb36aec4dd68b55e4df3e4237.png"></a><div class="page-footer__envato-product-description">Custom digital services like logo design, WordPress installation, video production and more. <a class="page-footer__link page-footer__envato-product-link" href="http://studio.envato.com/?utm_source=tutsfooter&utm_medium=banner&utm_campaign=tutsfooter">Check out Envato Studio</a></div></div><div class="page-footer__envato-product"><a href="http://codecanyon.net/popular_item/by_category?category=php-scripts&ref=tutshub&utm_source=tutsplus&utm_medium=footer&utm_campaign=tutscode"><img alt="Browse iOS apps on CodeCanyon" class="page-footer__envato-product-image page-footer__envato-product-image--marketplaces" src="./Seite2_files/codecanyon--create-ios-apps-97d07777fe7c495a3fa69ab74738a5dc.jpg"></a><div class="page-footer__envato-product-description">Browse 500+ unique template files for iOS apps.  Create games and utility apps with pre-built app code. <a class="page-footer__link page-footer__envato-product-link" href="http://codecanyon.net/popular_item/by_category?category=php-scripts&ref=tutshub&utm_source=tutsplus&utm_medium=footer&utm_campaign=tutscode">Browse iOS Apps on CodeCanyon</a></div></div></div></div><div class="page-footer__envato-bar"><div class="page-footer__envato-bar-content"><div class="page-footer__copyright">© 2015 Envato Pty Ltd. Trademarks and brands are the property of their respective owners.</div><div class="page-footer__envato-logo"><a class="page-footer__envato-logo-link" href="http://www.envato.com/"><img alt="envato" class="page-footer__envato-logo-image" src="./Seite2_files/envato_logo-cd2ea38a6d4bfbefb4f8ccb1b0c99178.svg"></a></div></div></div></footer><script src="./Seite2_files/body-b06d5c6ad265da82ff86f37889cffda0.js" async="async"></script><script src="./Seite2_files/1342X1022469.skimlinks.js" type="text/javascript"></script><div style="display: none;"><img src="./Seite2_files/track_page_view" style="display:none" width="0" height="0"></div><script src="./Seite2_files/MathJax.js"></script><div style="position: absolute; width: 0px; height: 0px; overflow: hidden; padding: 0px; border: 0px; margin: 0px;"><div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; padding: 0px; border: 0px; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal; font-family: MathJax_Size3, sans-serif;"></div></div></body></html>